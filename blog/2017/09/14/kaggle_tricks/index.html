<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle">
	

	
	<link rel='preload' href='//apps.shareaholic.com/assets/pub/shareaholic.js' as='script' />
	<script type="text/javascript" data-cfasync="false" async src="//apps.shareaholic.com/assets/pub/shareaholic.js" data-shr-siteid="fd1ffa7fd7152e4e20568fbe49a489d0"></script>
	
	
	<meta name="generator" content="Hugo 0.53" />
	<meta property="og:title" content="Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository" />
<meta property="og:description" content="Here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mlwhiz.com/blog/2017/09/14/kaggle_tricks/" />
<meta property="og:image" content="https://storage.googleapis.com/kaggle-organizations/4/thumbnail.png" />
<meta property="article:published_time" content="2017-09-14T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2017-09-14T00:00:00&#43;00:00"/>

	<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://storage.googleapis.com/kaggle-organizations/4/thumbnail.png"/>

<meta name="twitter:title" content="Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository"/>
<meta name="twitter:description" content="Here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle"/>


	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	
	
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-54777926-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-NMQD44T');</script>
	

	
	<script>
	  !function(f,b,e,v,n,t,s)
	  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
	  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
	  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
	  n.queue=[];t=b.createElement(e);t.async=!0;
	  t.src=v;s=b.getElementsByTagName(e)[0];
	  s.parentNode.insertBefore(t,s)}(window, document,'script',
	  'https://connect.facebook.net/en_US/fbevents.js');
	  fbq('init', '1062344757288542');
	  fbq('track', 'PageView');
	</script>
	<noscript><img height="1" width="1" style="display:none"
	  src="https://www.facebook.com/tr?id=1062344757288542&ev=PageView&noscript=1"
	/></noscript>
	


	
  	<script async>(function(s,u,m,o,j,v){j=u.createElement(m);v=u.getElementsByTagName(m)[0];j.async=1;j.src=o;j.dataset.sumoSiteId='22863fd8ad7ebbfab9b8ca60b7db8f65e9a15559f384f785f66903e365aa8f48';v.parentNode.insertBefore(j,v)})(window,document,'script','//load.sumo.com/');</script>
  	<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>
</head>
<body class="body">
	  
	  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMQD44T"
	  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	  
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">

			<a class="logo__link" href="/" title="MLWhiz" rel="home">

				<div class="logo__title">MLWhiz</div>
				<div class="logo__tagline">Deep Learning, Data Science and NLP Enthusiast</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">Blog</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/archive">Archive</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">About Me</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/nlpseries/">NLP</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/atom.xml">RSS</a>
		</li>
	</ul>
</nav>

	</div>
</header>


		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2017-09-14T00:00:00">September 14, 2017</time>
</div>
</div>
		</header>
		<div class="content post__content clearfix">
			

<p>Often times it happens that we fall short of creativity. And creativity is one of the basic ingredients of what we do. Creating features needs creativity. So here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle leaderboards.</p>

<p>Take a look at the <a href="https://www.coursera.org/specializations/aml?siteID=lVarvwc5BD0-AqkGMb7JzoCMW0Np1uLfCA&amp;utm_content=2&amp;utm_medium=partners&amp;utm_source=linkshare&amp;utm_campaign=lVarvwc5BD0" rel="nofollow" target="_blank">How to Win a Data Science Competition: Learn from Top Kagglers</a> course in the <a href="https://www.coursera.org/specializations/aml?siteID=lVarvwc5BD0-AqkGMb7JzoCMW0Np1uLfCA&amp;utm_content=2&amp;utm_medium=partners&amp;utm_source=linkshare&amp;utm_campaign=lVarvwc5BD0" rel="nofollow" target="_blank">Advanced machine learning specialization</a> by Kazanova(Number 3 Kaggler at the time of writing). You can start for free with the 7-day Free Trial.</p>

<p>This post is inspired by a <a href="https://www.kaggle.com/gaborfodor/from-eda-to-the-top-lb-0-368" rel="nofollow" target="_blank">Kernel</a> on Kaggle written by Beluga, one of the top Kagglers, for a knowledge based <a href="https://www.kaggle.com/c/nyc-taxi-trip-duration" rel="nofollow" target="_blank">competition</a>.</p>

<p>Some of the techniques/tricks I am sharing have been taken directly from that kernel so you could take a look yourself.
Otherwise stay here and read on.</p>

<h2 id="1-don-t-try-predicting-the-future-when-you-don-t-have-to">1. Don&rsquo;t try predicting the future when you don&rsquo;t have to:</h2>

<p>If both training/test comes from the same timeline, we can get really crafty with features. Although this is a case with Kaggle only, we can use this to our advantage. For example: In the Taxi Trip duration challenge the test data is randomly sampled from the train data. In this case we can use the target variable averaged over different categorical variable as a feature. Like in this case Beluga actually used the averaged the target variable over different weekdays. He then mapped the same averaged value as a variable by mapping it to test data too.</p>

<h2 id="2-logloss-clipping-technique">2. logloss clipping Technique:</h2>

<p>Something that I learned in the Neural Network course by Jeremy Howard. Its based on a very simple Idea. Logloss penalises a lot if we are very confident and wrong. So in case of Classification problems where we have to predict probabilities, it would be much better to clip our probabilities between 0.05-0.95 so that we are never very sure about our prediction.</p>

<h2 id="3-kaggle-submission-in-gzip-format">3. kaggle submission in gzip format:</h2>

<p>A small piece of code that will help you save countless hours of uploading. Enjoy.
df.to_csv(&lsquo;submission.csv.gz&rsquo;, index=False, compression=&lsquo;gzip&rsquo;)</p>

<h2 id="4-how-best-to-use-latitude-and-longitude-features-part-1">4. How best to use Latitude and Longitude features - Part 1:</h2>

<p>One of the best things that I liked about the Beluga Kernel is how he used the Lat/Lon Data. So in the example we had pickup Lat/Lon and Dropoff Lat/Lon. We created features like:</p>

<h4 id="a-haversine-distance-between-the-two-lat-lons">A. Haversine Distance Between the Two Lat/Lons:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">haversine_array</span>(lat1, lng1, lat2, lng2):
    lat1, lng1, lat2, lng2 <span style="color:#f92672">=</span> map(np<span style="color:#f92672">.</span>radians, (lat1, lng1, lat2, lng2))
    AVG_EARTH_RADIUS <span style="color:#f92672">=</span> <span style="color:#ae81ff">6371</span>  <span style="color:#75715e"># in km</span>
    lat <span style="color:#f92672">=</span> lat2 <span style="color:#f92672">-</span> lat1
    lng <span style="color:#f92672">=</span> lng2 <span style="color:#f92672">-</span> lng1
    d <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sin(lat <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>cos(lat1) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>cos(lat2) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>sin(lng <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>
    h <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> AVG_EARTH_RADIUS <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>arcsin(np<span style="color:#f92672">.</span>sqrt(d))
    <span style="color:#66d9ef">return</span> h</code></pre></div>
<h4 id="b-manhattan-distance-between-the-two-lat-lons">B. Manhattan Distance Between the two Lat/Lons:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dummy_manhattan_distance</span>(lat1, lng1, lat2, lng2):
    a <span style="color:#f92672">=</span> haversine_array(lat1, lng1, lat1, lng2)
    b <span style="color:#f92672">=</span> haversine_array(lat1, lng1, lat2, lng1)
    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b</code></pre></div>
<h4 id="c-bearing-between-the-two-lat-lons">C. Bearing Between the two Lat/Lons:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bearing_array</span>(lat1, lng1, lat2, lng2):
    AVG_EARTH_RADIUS <span style="color:#f92672">=</span> <span style="color:#ae81ff">6371</span>  <span style="color:#75715e"># in km</span>
    lng_delta_rad <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>radians(lng2 <span style="color:#f92672">-</span> lng1)
    lat1, lng1, lat2, lng2 <span style="color:#f92672">=</span> map(np<span style="color:#f92672">.</span>radians, (lat1, lng1, lat2, lng2))
    y <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sin(lng_delta_rad) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>cos(lat2)
    x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>cos(lat1) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>sin(lat2) <span style="color:#f92672">-</span> np<span style="color:#f92672">.</span>sin(lat1) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>cos(lat2) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>cos(lng_delta_rad)
    <span style="color:#66d9ef">return</span> np<span style="color:#f92672">.</span>degrees(np<span style="color:#f92672">.</span>arctan2(y, x))</code></pre></div>
<h4 id="d-center-latitude-and-longitude-between-pickup-and-dropoff">D. Center Latitude and Longitude between Pickup and Dropoff:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">train<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;center_latitude&#39;</span>] <span style="color:#f92672">=</span> (train[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>]<span style="color:#f92672">.</span>values <span style="color:#f92672">+</span> train[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>]<span style="color:#f92672">.</span>values) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
train<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;center_longitude&#39;</span>] <span style="color:#f92672">=</span> (train[<span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]<span style="color:#f92672">.</span>values <span style="color:#f92672">+</span> train[<span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]<span style="color:#f92672">.</span>values) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span></code></pre></div>
<h2 id="5-how-best-to-use-latitude-and-longitude-features-part-2">5. How best to use Latitude and Longitude features - Part 2:</h2>

<p>The Second way he used the Lat/Lon Feats was to create clusters for Pickup and Dropoff Lat/Lons. The way it worked was it created sort of Boroughs in the data by design.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">from</span> sklearn.cluster <span style="color:#f92672">import</span> MiniBatchKMeans
coords <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>vstack((train[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]]<span style="color:#f92672">.</span>values,
                    train[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]]<span style="color:#f92672">.</span>values,
                    test[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]]<span style="color:#f92672">.</span>values,
                    test[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]]<span style="color:#f92672">.</span>values))

sample_ind <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>permutation(len(coords))[:<span style="color:#ae81ff">500000</span>]
kmeans <span style="color:#f92672">=</span> MiniBatchKMeans(n_clusters<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>, batch_size<span style="color:#f92672">=</span><span style="color:#ae81ff">10000</span>)<span style="color:#f92672">.</span>fit(coords[sample_ind])

train<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;pickup_cluster&#39;</span>] <span style="color:#f92672">=</span> kmeans<span style="color:#f92672">.</span>predict(train[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])
train<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;dropoff_cluster&#39;</span>] <span style="color:#f92672">=</span> kmeans<span style="color:#f92672">.</span>predict(train[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])
test<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;pickup_cluster&#39;</span>] <span style="color:#f92672">=</span> kmeans<span style="color:#f92672">.</span>predict(test[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])
test<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;dropoff_cluster&#39;</span>] <span style="color:#f92672">=</span> kmeans<span style="color:#f92672">.</span>predict(test[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])</code></pre></div>
<p>He then used these Clusters to create features like counting no of trips going out and coming in on a particular day.</p>

<h2 id="6-how-best-to-use-latitude-and-longitude-features-part-3">6. How best to use Latitude and Longitude features - Part 3</h2>

<p>He used PCA to transform longitude and latitude coordinates. In this case it is not about dimension reduction since he transformed 2D-&gt; 2D. The rotation could help for decision tree splits, and it did actually.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pca <span style="color:#f92672">=</span> PCA()<span style="color:#f92672">.</span>fit(coords)
train[<span style="color:#e6db74">&#39;pickup_pca0&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(train[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])[:, <span style="color:#ae81ff">0</span>]
train[<span style="color:#e6db74">&#39;pickup_pca1&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(train[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])[:, <span style="color:#ae81ff">1</span>]
train[<span style="color:#e6db74">&#39;dropoff_pca0&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(train[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])[:, <span style="color:#ae81ff">0</span>]
train[<span style="color:#e6db74">&#39;dropoff_pca1&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(train[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])[:, <span style="color:#ae81ff">1</span>]
test[<span style="color:#e6db74">&#39;pickup_pca0&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(test[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])[:, <span style="color:#ae81ff">0</span>]
test[<span style="color:#e6db74">&#39;pickup_pca1&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(test[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])[:, <span style="color:#ae81ff">1</span>]
test[<span style="color:#e6db74">&#39;dropoff_pca0&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(test[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])[:, <span style="color:#ae81ff">0</span>]
test[<span style="color:#e6db74">&#39;dropoff_pca1&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(test[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])[:, <span style="color:#ae81ff">1</span>]</code></pre></div>
<h2 id="7-lets-not-forget-the-normal-things-you-can-do-with-your-features">7. Lets not forget the Normal Things you can do with your features:</h2>

<ul>
<li>Scaling by Max-Min</li>
<li>Normalization using Standard Deviation</li>
<li>Log based feature/Target: use log based features or log based target function.</li>
<li>One Hot Encoding</li>
</ul>

<h2 id="8-creating-intuitive-additional-features">8. Creating Intuitive Additional Features:</h2>

<p>A) Date time Features: Time based Features like &ldquo;Evening&rdquo;, &ldquo;Noon&rdquo;, &ldquo;Night&rdquo;, &ldquo;Purchases_last_month&rdquo;, &ldquo;Purchases_last_week&rdquo; etc.</p>

<p>B) Thought Features: Suppose you have shopping cart data and you want to categorize TripType (See Walmart Recruiting: Trip Type Classification on <a href="https://www.kaggle.com/c/walmart-recruiting-trip-type-classification/" rel="nofollow" target="_blank">Kaggle</a> for some background).</p>

<p>You could think of creating a feature like &ldquo;Stylish&rdquo; where you create this variable by adding together number of items that belong to category Men&rsquo;s Fashion, Women&rsquo;s Fashion, Teens Fashion.</p>

<p>You could create a feature like &ldquo;Rare&rdquo; which is created by tagging some items as rare, based on the data we have and then counting the number of those rare items in the shopping cart. Such features might work or might not work. From what I have observed they normally provide a lot of value.</p>

<p>I feel this is the way that Target&rsquo;s &ldquo;Pregnant Teen model&rdquo; was made. They would have had a variable in which they kept all the items that a pregnant teen could buy and put it into a classification algorithm.</p>

<h2 id="9-the-not-so-normal-things-which-people-do">9 . The not so Normal Things which people do:</h2>

<p>These features are highly unintuitive and should not be created where the machine learning model needs to be interpretable.</p>

<p>A) Interaction Features: If you have features A and B create features A*B, A+B, A/B, A-B. This explodes the feature space. If you have 10 features and you are creating two variable interactions you will be adding 10C2 * 4  features = 180 features to your model. And most of us have a lot more than 10 features.</p>

<p>B) Bucket Feature Using Hashing: Suppose you have a lot of features. In the order of Thousands but you don&rsquo;t want to use all the thousand features because of the training times of algorithms involved. People bucket their features using some hashing algorithm to achieve this.Mostly done for text classification tasks.
For example:
If we have 6 features A,B,C,D,E,F.
And the row of data is:
A:1,B:1,C:1,D:0,E:1,F:0
I may decide to use a hashing function so that these 6 features correspond to 3 buckets and create the data using this feature hashing vector.
After processing my data might look like:
Bucket1:2,Bucket2:2,Bucket3:0
Which happened because A and B fell in bucket1, C and E fell in bucket2 and D and F fell in bucket 3. I summed up the observations here, but you could substitute addition with any math function you like.
Now i would use Bucket1,Bucket2,Bucket3 as my variables for machine learning.</p>

<p>Will try to keep on expanding. Wait for more&hellip;.</p>

		</div>
		
<div class="post__tags tags clearfix">
	<svg class="icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/python/" rel="tag">Python</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/nlp/" rel="tag">NLP</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/algorithms/" rel="tag">Algorithms</a></li>
		<li class="tags__item"><a class="tags__link btn" href="/tags/kaggle/" rel="tag">Kaggle</a></li>
	</ul>
</div>
		

<div class="shareaholic-canvas" data-app="share_buttons" data-app-id="28372088"></div>
<a href="https://click.linksynergy.com/fs-bin/click?id=lVarvwc5BD0&offerid=467035.415&subid=0&type=4"><IMG border="0"   alt="Deep Learning Specialization on Coursera" src="https://ad.linksynergy.com/fs-bin/show?id=lVarvwc5BD0&bids=467035.415&subid=0&type=4&gridnum=16"></a>


	</article>
</main>


<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/blog/2017/09/14/discrete_distributions/" rel="prev"><span class="post-nav__caption">«&thinsp;Previous</span><p class="post-nav__post-title">The story of every distribution - Discrete Distributions</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/blog/2017/12/26/win_a_data_science_competition/" rel="next"><span class="post-nav__caption">Next&thinsp;»</span><p class="post-nav__post-title">Using XGBoost for time series prediction tasks</p></a>
	</div>
</nav>

<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "mlwhiz" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</div>
			<aside class="sidebar">
	     
  <div style="text-align:center">    
  <a href='https://ko-fi.com/S6S3NPCD' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://az743702.vo.msecnd.net/cdn/kofi4.png?v=0' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>
  </div>
  <br><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q" aria-label="SEARCH...">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="https://mlwhiz.com/" />
	</form>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/blog/2019/10/10/hyperopt2/">Automate Hyperparameter Tuning for your models</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/09/26/building_ml_system/">6 Important Steps to build  a Machine Learning System</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/09/23/generative_approach_to_classification/">A Generative Approach to Classification</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/09/02/graph_algs/">Data Scientists, The 5 Graph Algorithms that you should know</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/09/01/regex/">The Ultimate Guide to using the Python regex module</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/08/12/resources/">How did I learn Data Science?</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/08/07/feature_selection/">The 5 Feature Selection Algorithms every Data Scientist should know</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/07/30/sampling/">The 5 Sampling Algorithms every Data Scientist need to know</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/07/21/bandits/">Bayesian Bandits explained simply</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/2019/07/20/pandas_subset/">Minimal Pandas Subset for Data Scientists</a></li>
		</ul>
	</div>
</div>


<div class="shareaholic-canvas" data-app="follow_buttons" data-app-id="28033293" style="white-space: inherit;"></div>


<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">


<style type="text/css">
  #mc_embed_signup .button {background-color: #127edc;}
  #mc_embed_signup form .center{
    display: block;
    position: relative;
    text-align: center;
    padding: 10px -5px 10px 3%;}
   
</style>
<div id="mc_embed_signup">
<form action="//mlwhiz.us15.list-manage.com/subscribe/post?u=4e9962f4ce4a94818bcc2f249&amp;id=87a48fafdd" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_4e9962f4ce4a94818bcc2f249_87a48fafdd" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy;  2014-2019 Rahul Agarwal.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>



	</div>
<script src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=93f2f4f9-cf51-415d-84af-08cbb74b178f"></script>
<script async defer src="/js/menu.js"></script></body>
</html>