<!doctype html><html lang=en-us><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-F34XSWQ5N4"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-F34XSWQ5N4')</script><meta charset=utf-8><title>Good Feature Building Techniques - Tricks for Kaggle - My Kaggle Code Repository - MLWhiz</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle"><meta name=author content="Rahul Agarwal"><meta name=generator content="Hugo 0.82.0"><link rel=stylesheet href=https://mlwhiz.com/plugins/compressjscss/main.css><meta property="og:title" content="Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository - MLWhiz"><meta property="og:description" content="Here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle"><meta property="og:type" content="article"><meta property="og:url" content="https://mlwhiz.com/blog/2017/09/14/kaggle_tricks/"><meta property="og:image" content="https://mlwhiz.com/images/category_bgs/default_bg.jpg"><meta property="og:image:secure_url" content="https://mlwhiz.com/images/category_bgs/default_bg.jpg"><meta property="article:published_time" content="2017-09-14T00:00:00+00:00"><meta property="article:modified_time" content="2023-07-11T19:28:14+01:00"><meta property="article:tag" content="Data Science"><meta name=twitter:card content="summary"><meta name=twitter:image content="https://mlwhiz.com/images/category_bgs/default_bg.jpg"><meta name=twitter:title content="Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository - MLWhiz"><meta name=twitter:description content="Here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle"><meta name=twitter:site content="@mlwhiz"><meta name=twitter:creator content="@mlwhiz"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href=https://mlwhiz.com/scss/style.min.css media=screen><link rel=stylesheet href=/css/style.css><link rel=stylesheet type=text/css href=/css/font/flaticon.css><link rel="shortcut icon" href=https://mlwhiz.com/images/logos/favicon-32x32.png type=image/x-icon><link rel=icon href=https://mlwhiz.com/images/logos/favicon.ico type=image/x-icon><link rel=canonical href=https://mlwhiz.com/blog/2017/09/14/kaggle_tricks/><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://www.mlwhiz.com/#website","url":"https://www.mlwhiz.com/","name":"MLWhiz","description":"Want to Learn Computer Vision and NLP? - MLWhiz","potentialAction":{"@type":"SearchAction","target":"https://www.mlwhiz.com/search?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"ImageObject","@id":"https://mlwhiz.com/blog/2017/09/14/kaggle_tricks/#primaryimage","url":"https://mlwhiz.com/images/category_bgs/default_bg.jpg","width":700,"height":450},{"@type":"WebPage","@id":"https://mlwhiz.com/blog/2017/09/14/kaggle_tricks/#webpage","url":"https://mlwhiz.com/blog/2017/09/14/kaggle_tricks/","inLanguage":"en-US","name":"Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository - MLWhiz","isPartOf":{"@id":"https://www.mlwhiz.com/#website"},"primaryImageOfPage":{"@id":"https://mlwhiz.com/blog/2017/09/14/kaggle_tricks/#primaryimage"},"datePublished":"2017-09-14T00:00:00.00Z","dateModified":"2023-07-11T19:28:14.00Z","author":{"@id":"https://mlwhiz.com/about/#/schema/person/76376876bchxkzbchjsdjcca"},"description":"Here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle"},{"@type":["Person"],"@id":"https://mlwhiz.com/about/#/schema/person/76376876bchxkzbchjsdjcca","name":"Rahul Agarwal","image":{"@type":"ImageObject","@id":"https://www.mlwhiz.com/#authorlogo","url":"https://mlwhiz.com/images/author.jpg","caption":"Rahul Agarwal"},"description":"Hi there, I\u2019m Rahul Agarwal. I\u2019m a data scientist consultant and big data engineer based in Bangalore. I see a lot of times  students and even professionals wasting their time and struggling to get started with Computer Vision, Deep Learning, and NLP. I Started this Site with a purpose to augment my own understanding about new things while helping others learn about them in the best possible way.","sameAs":["https://www.linkedin.com/in/rahulagwl/","https://medium.com/@rahul_agarwal","https://twitter.com/MLWhiz","https://www.facebook.com/mlwhizblog","https://github.com/MLWhiz","https://www.instagram.com/itsmlwhiz"]}]}</script><script async data-uid=a0ebaf958d src=https://mlwhiz.ck.page/a0ebaf958d/index.js></script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$']],processEscapes:!0,processEnvironments:!0,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var b=MathJax.Hub.getAllJax(),a;for(a=0;a<b.length;a+=1)b[a].SourceElement().parentNode.className+=' has-jax'}),MathJax.Hub.Config({TeX:{equationNumbers:{autoNumber:"AMS"}}})</script><link href=//apps.shareaholic.com/assets/pub/shareaholic.js as=script><script type=text/javascript data-cfasync=false async src=//apps.shareaholic.com/assets/pub/shareaholic.js data-shr-siteid=fd1ffa7fd7152e4e20568fbe49a489d0></script><script>!function(b,e,f,g,a,c,d){if(b.fbq)return;a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version='2.0',a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js'),fbq('init','402633927768628'),fbq('track','PageView')</script><noscript><img height=1 width=1 style=display:none src="https://www.facebook.com/tr?id=402633927768628&ev=PageView&noscript=1"></noscript><meta property="fb:pages" content="213104036293742"><meta name=facebook-domain-verification content="qciidcy7mm137sewruizlvh8zbfnv4"></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMQD44T" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div class=preloader></div><header class=navigation><div class=container><nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0"><a class="navbar-brand mobile-view" href=https://mlwhiz.com/><img class=img-fluid src=https://mlwhiz.com/images/logos/logo.svg alt="MLWhiz - Your Home for DS, ML, AI!"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class="ti-menu h3"></i></button><div class="collapse navbar-collapse text-center" id=navigation><div class=desktop-view><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href="www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=rahulagwl"><i class=ti-linkedin></i></a></li><li class=nav-item><a class=nav-link href=https://mlwhiz.medium.com/><i class=ti-book></i></a></li><li class=nav-item><a class=nav-link href=https://twitter.com/MLWhiz><i class=ti-twitter-alt></i></a></li><li class=nav-item><a class=nav-link href=https://www.facebook.com/mlwhizblog><i class=ti-facebook></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/MLWhiz><i class=ti-github></i></a></li></ul></div><a class="navbar-brand mx-auto desktop-view" href=https://mlwhiz.com/><img class=img-fluid-custom src=https://mlwhiz.com/images/logos/logo.svg alt="MLWhiz - Your Home for DS, ML, AI!"></a><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://mlwhiz.com/about>About</a></li><li class=nav-item><a class=nav-link href=https://mlwhiz.com/blog>Blog</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Topics</a><div class=dropdown-menu><a class=dropdown-item href=https://mlwhiz.com/categories/natural-language-processing>NLP</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/computer-vision>Computer Vision</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/deep-learning>Deep Learning</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/data-science>DS/ML</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/big-data>Big Data</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/awesome-guides>My Best Content</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/learning-resources>Learning Resources</a></div></li></ul><div class="search pl-lg-4"><button id=searchOpen class=search-btn><i class=ti-search></i></button><div class=search-wrapper><form action=https://mlwhiz.com//search class=h-100><input class="search-box px-4" id=search-query name=s type=search placeholder="Type & Hit Enter..."></form><button id=searchClose class=search-close><i class="ti-close text-dark"></i></button></div></div></div></nav></div></header><section class=section-sm><div class=container><div class=row><div class="col-lg-8 mb-5 mb-lg-0"><a href=/categories/data-science class=categoryStyle>Data Science</a><h1>Good Feature Building Techniques - Tricks for Kaggle - My Kaggle Code Repository</h1><div class="mb-3 post-meta"><span>By Rahul Agarwal</span><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
<span>14 September 2017</span></div><img src=https://mlwhiz.com/images/category_bgs/default_bg.jpg class="img-fluid w-100 mb-4" alt="Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository"><div class="content mb-5"><p>Often times it happens that we fall short of creativity. And creativity is one of the basic ingredients of what we do. Creating features needs creativity. So here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle leaderboards.</p><p>Take a look at the
<a href=https://coursera.pxf.io/yRPoZB target=_blank rel="nofollow noopener">How to Win a Data Science Competition: Learn from Top Kagglers</a>
course in the
<a href=https://coursera.pxf.io/yRPoZB target=_blank rel="nofollow noopener">Advanced machine learning specialization</a>
by Kazanova(Number 3 Kaggler at the time of writing). You can start for free with the 7-day Free Trial.</p><p>This post is inspired by a
<a href=https://www.kaggle.com/gaborfodor/from-eda-to-the-top-lb-0-368 target=_blank rel="nofollow noopener">Kernel</a>
on Kaggle written by Beluga, one of the top Kagglers, for a knowledge based
<a href=https://www.kaggle.com/c/nyc-taxi-trip-duration target=_blank rel="nofollow noopener">competition</a>
.</p><p>Some of the techniques/tricks I am sharing have been taken directly from that kernel so you could take a look yourself.
Otherwise stay here and read on.</p><h2 id=1-dont-try-predicting-the-future-when-you-dont-have-to>1. Don&rsquo;t try predicting the future when you don&rsquo;t have to:</h2><p>If both training/test comes from the same timeline, we can get really crafty with features. Although this is a case with Kaggle only, we can use this to our advantage. For example: In the Taxi Trip duration challenge the test data is randomly sampled from the train data. In this case we can use the target variable averaged over different categorical variable as a feature. Like in this case Beluga actually used the averaged the target variable over different weekdays. He then mapped the same averaged value as a variable by mapping it to test data too.</p><h2 id=2-logloss-clipping-technique>2. logloss clipping Technique:</h2><p>Something that I learned in the Neural Network course by Jeremy Howard. Its based on a very simple Idea. Logloss penalises a lot if we are very confident and wrong. So in case of Classification problems where we have to predict probabilities, it would be much better to clip our probabilities between 0.05-0.95 so that we are never very sure about our prediction.</p><h2 id=3-kaggle-submission-in-gzip-format>3. kaggle submission in gzip format:</h2><p>A small piece of code that will help you save countless hours of uploading. Enjoy.
df.to_csv(&lsquo;submission.csv.gz&rsquo;, index=False, compression=&lsquo;gzip&rsquo;)</p><h2 id=4-how-best-to-use-latitude-and-longitude-features---part-1>4. How best to use Latitude and Longitude features - Part 1:</h2><p>One of the best things that I liked about the Beluga Kernel is how he used the Lat/Lon Data. So in the example we had pickup Lat/Lon and Dropoff Lat/Lon. We created features like:</p><h4 id=a-haversine-distance-between-the-two-latlons>A. Haversine Distance Between the Two Lat/Lons:</h4><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>haversine_array</span>(lat1, lng1, lat2, lng2):
    lat1, lng1, lat2, lng2 = <span style=color:#24909d>map</span>(np.radians, (lat1, lng1, lat2, lng2))
    AVG_EARTH_RADIUS = <span style=color:#3677a9>6371</span>  <span style=color:#999;font-style:italic># in km</span>
    lat = lat2 - lat1
    lng = lng2 - lng1
    d = np.sin(lat * <span style=color:#3677a9>0.5</span>) ** <span style=color:#3677a9>2</span> + np.cos(lat1) * np.cos(lat2) * np.sin(lng * <span style=color:#3677a9>0.5</span>) ** <span style=color:#3677a9>2</span>
    h = <span style=color:#3677a9>2</span> * AVG_EARTH_RADIUS * np.arcsin(np.sqrt(d))
    <span style=color:#6ab825;font-weight:700>return</span> h
</code></pre></div><h4 id=b-manhattan-distance-between-the-two-latlons>B. Manhattan Distance Between the two Lat/Lons:</h4><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>dummy_manhattan_distance</span>(lat1, lng1, lat2, lng2):
    a = haversine_array(lat1, lng1, lat1, lng2)
    b = haversine_array(lat1, lng1, lat2, lng1)
    <span style=color:#6ab825;font-weight:700>return</span> a + b
</code></pre></div><h4 id=c-bearing-between-the-two-latlons>C. Bearing Between the two Lat/Lons:</h4><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>bearing_array</span>(lat1, lng1, lat2, lng2):
    AVG_EARTH_RADIUS = <span style=color:#3677a9>6371</span>  <span style=color:#999;font-style:italic># in km</span>
    lng_delta_rad = np.radians(lng2 - lng1)
    lat1, lng1, lat2, lng2 = <span style=color:#24909d>map</span>(np.radians, (lat1, lng1, lat2, lng2))
    y = np.sin(lng_delta_rad) * np.cos(lat2)
    x = np.cos(lat1) * np.sin(lat2) - np.sin(lat1) * np.cos(lat2) * np.cos(lng_delta_rad)
    <span style=color:#6ab825;font-weight:700>return</span> np.degrees(np.arctan2(y, x))
</code></pre></div><h4 id=d-center-latitude-and-longitude-between-pickup-and-dropoff>D. Center Latitude and Longitude between Pickup and Dropoff:</h4><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>train.loc[:, <span style=color:#ed9d13>&#39;center_latitude&#39;</span>] = (train[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>].values + train[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>].values) / <span style=color:#3677a9>2</span>
train.loc[:, <span style=color:#ed9d13>&#39;center_longitude&#39;</span>] = (train[<span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>].values + train[<span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>].values) / <span style=color:#3677a9>2</span>
</code></pre></div><h2 id=5-how-best-to-use-latitude-and-longitude-features---part-2>5. How best to use Latitude and Longitude features - Part 2:</h2><p>The Second way he used the Lat/Lon Feats was to create clusters for Pickup and Dropoff Lat/Lons. The way it worked was it created sort of Boroughs in the data by design.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=color:#6ab825;font-weight:700>from</span> <span style=color:#447fcf;text-decoration:underline>sklearn.cluster</span> <span style=color:#6ab825;font-weight:700>import</span> MiniBatchKMeans
coords = np.vstack((train[[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>, <span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>]].values,
                    train[[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>, <span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>]].values,
                    test[[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>, <span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>]].values,
                    test[[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>, <span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>]].values))

sample_ind = np.random.permutation(<span style=color:#24909d>len</span>(coords))[:<span style=color:#3677a9>500000</span>]
kmeans = MiniBatchKMeans(n_clusters=<span style=color:#3677a9>100</span>, batch_size=<span style=color:#3677a9>10000</span>).fit(coords[sample_ind])

train.loc[:, <span style=color:#ed9d13>&#39;pickup_cluster&#39;</span>] = kmeans.predict(train[[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>, <span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>]])
train.loc[:, <span style=color:#ed9d13>&#39;dropoff_cluster&#39;</span>] = kmeans.predict(train[[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>, <span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>]])
test.loc[:, <span style=color:#ed9d13>&#39;pickup_cluster&#39;</span>] = kmeans.predict(test[[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>, <span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>]])
test.loc[:, <span style=color:#ed9d13>&#39;dropoff_cluster&#39;</span>] = kmeans.predict(test[[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>, <span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>]])
</code></pre></div><p>He then used these Clusters to create features like counting no of trips going out and coming in on a particular day.</p><h2 id=6-how-best-to-use-latitude-and-longitude-features---part-3>6. How best to use Latitude and Longitude features - Part 3</h2><p>He used PCA to transform longitude and latitude coordinates. In this case it is not about dimension reduction since he transformed 2D-> 2D. The rotation could help for decision tree splits, and it did actually.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>pca = PCA().fit(coords)
train[<span style=color:#ed9d13>&#39;pickup_pca0&#39;</span>] = pca.transform(train[[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>, <span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>]])[:, <span style=color:#3677a9>0</span>]
train[<span style=color:#ed9d13>&#39;pickup_pca1&#39;</span>] = pca.transform(train[[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>, <span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>]])[:, <span style=color:#3677a9>1</span>]
train[<span style=color:#ed9d13>&#39;dropoff_pca0&#39;</span>] = pca.transform(train[[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>, <span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>]])[:, <span style=color:#3677a9>0</span>]
train[<span style=color:#ed9d13>&#39;dropoff_pca1&#39;</span>] = pca.transform(train[[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>, <span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>]])[:, <span style=color:#3677a9>1</span>]
test[<span style=color:#ed9d13>&#39;pickup_pca0&#39;</span>] = pca.transform(test[[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>, <span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>]])[:, <span style=color:#3677a9>0</span>]
test[<span style=color:#ed9d13>&#39;pickup_pca1&#39;</span>] = pca.transform(test[[<span style=color:#ed9d13>&#39;pickup_latitude&#39;</span>, <span style=color:#ed9d13>&#39;pickup_longitude&#39;</span>]])[:, <span style=color:#3677a9>1</span>]
test[<span style=color:#ed9d13>&#39;dropoff_pca0&#39;</span>] = pca.transform(test[[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>, <span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>]])[:, <span style=color:#3677a9>0</span>]
test[<span style=color:#ed9d13>&#39;dropoff_pca1&#39;</span>] = pca.transform(test[[<span style=color:#ed9d13>&#39;dropoff_latitude&#39;</span>, <span style=color:#ed9d13>&#39;dropoff_longitude&#39;</span>]])[:, <span style=color:#3677a9>1</span>]
</code></pre></div><h2 id=7-lets-not-forget-the-normal-things-you-can-do-with-your-features>7. Lets not forget the Normal Things you can do with your features:</h2><ul><li>Scaling by Max-Min</li><li>Normalization using Standard Deviation</li><li>Log based feature/Target: use log based features or log based target function.</li><li>One Hot Encoding</li></ul><h2 id=8-creating-intuitive-additional-features>8. Creating Intuitive Additional Features:</h2><p>A) Date time Features: Time based Features like &ldquo;Evening&rdquo;, &ldquo;Noon&rdquo;, &ldquo;Night&rdquo;, &ldquo;Purchases_last_month&rdquo;, &ldquo;Purchases_last_week&rdquo; etc.</p><p>B) Thought Features: Suppose you have shopping cart data and you want to categorize TripType (See Walmart Recruiting: Trip Type Classification on
<a href=https://www.kaggle.com/c/walmart-recruiting-trip-type-classification/ target=_blank rel="nofollow noopener">Kaggle</a>
for some background).</p><p>You could think of creating a feature like &ldquo;Stylish&rdquo; where you create this variable by adding together number of items that belong to category Men&rsquo;s Fashion, Women&rsquo;s Fashion, Teens Fashion.</p><p>You could create a feature like &ldquo;Rare&rdquo; which is created by tagging some items as rare, based on the data we have and then counting the number of those rare items in the shopping cart. Such features might work or might not work. From what I have observed they normally provide a lot of value.</p><p>I feel this is the way that Target&rsquo;s &ldquo;Pregnant Teen model&rdquo; was made. They would have had a variable in which they kept all the items that a pregnant teen could buy and put it into a classification algorithm.</p><h2 id=9--the-not-so-normal-things-which-people-do>9 . The not so Normal Things which people do:</h2><p>These features are highly unintuitive and should not be created where the machine learning model needs to be interpretable.</p><p>A) Interaction Features: If you have features A and B create features A*B, A+B, A/B, A-B. This explodes the feature space. If you have 10 features and you are creating two variable interactions you will be adding 10C2 * 4 features = 180 features to your model. And most of us have a lot more than 10 features.</p><p>B) Bucket Feature Using Hashing: Suppose you have a lot of features. In the order of Thousands but you don&rsquo;t want to use all the thousand features because of the training times of algorithms involved. People bucket their features using some hashing algorithm to achieve this.Mostly done for text classification tasks.
For example:
If we have 6 features A,B,C,D,E,F.
And the row of data is:
A:1,B:1,C:1,D:0,E:1,F:0
I may decide to use a hashing function so that these 6 features correspond to 3 buckets and create the data using this feature hashing vector.
After processing my data might look like:
Bucket1:2,Bucket2:2,Bucket3:0
Which happened because A and B fell in bucket1, C and E fell in bucket2 and D and F fell in bucket 3. I summed up the observations here, but you could substitute addition with any math function you like.
Now i would use Bucket1,Bucket2,Bucket3 as my variables for machine learning.</p><p>Will try to keep on expanding. Wait for more&mldr;.</p><script async data-uid=8d7942551b src=https://mlwhiz.ck.page/8d7942551b/index.js></script><div class=shareaholic-canvas data-app=share_buttons data-app-id=28372088 style=margin-bottom:1px></div><a href=https://coursera.pxf.io/coursera rel=nofollow><img border=0 alt="Start your future with a Data Analysis Certificate." src="https://ad.linksynergy.com/fs-bin/show?id=lVarvwc5BD0&bids=759505.377&subid=0&type=4&gridnum=16"></a><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//mlwhiz.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class=col-lg-4><div class=widget><script type=text/javascript src=https://ko-fi.com/widgets/widget_2.js></script><script type=text/javascript>kofiwidget2.init('Support Me on Ko-fi','#972EB4','S6S3NPCD'),kofiwidget2.draw()</script></div><div class=widget><h4 class=widget-title>About Me</h4><img src=https://mlwhiz.com/images/author.jpg alt class="img-fluid author-thumb-sm d-block mx-auto rounded-circle mb-4"><p>I’m a Machine Learning Engineer based in London, where I am currently working with Roku .</p><a href=https://mlwhiz.com/about/ class="btn btn-outline-primary">Know More</a></div><div class=widget><h4 class=widget-title>Topics</h4><ul class=list-unstyled><li><a class="categoryStyle text-white" href=/categories/awesome-guides>Awesome Guides</a></li><li><a class="categoryStyle text-white" href=/categories/bash>Bash</a></li><li><a class="categoryStyle text-white" href=/categories/big-data>Big Data</a></li><li><a class="categoryStyle text-white" href=/categories/chatgpt-series>Chatgpt Series</a></li><li><a class="categoryStyle text-white" href=/categories/computer-vision>Computer Vision</a></li><li><a class="categoryStyle text-white" href=/categories/data-science>Data Science</a></li><li><a class="categoryStyle text-white" href=/categories/deep-learning>Deep Learning</a></li><li><a class="categoryStyle text-white" href=/categories/learning-resources>Learning Resources</a></li><li><a class="categoryStyle text-white" href=/categories/machine-learning>Machine Learning</a></li><li><a class="categoryStyle text-white" href=/categories/natural-language-processing>Natural Language Processing</a></li><li><a class="categoryStyle text-white" href=/categories/opinion>Opinion</a></li><li><a class="categoryStyle text-white" href=/categories/programming>Programming</a></li></ul></div><div class=widget><h4 class=widget-title>Tags</h4><ul class=list-inline><li class=list-inline-item><a class="tagStyle text-white" href=/tags/algorithms>Algorithms</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/artificial-intelligence>Artificial Intelligence</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/chatgpt>Chatgpt</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/dask>Dask</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/deployment>Deployment</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/ec2>Ec2</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/generative-adversarial-networks>Generative Adversarial Networks</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/graphs>Graphs</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/image-classification>Image Classification</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/instance-segmentation>Instance Segmentation</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/interpretability>Interpretability</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/jobs>Jobs</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/kaggle>Kaggle</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/language-modeling>Language Modeling</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/machine-learning>Machine Learning</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/math>Math</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/multiprocessing>Multiprocessing</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/object-detection>Object Detection</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/oop>Oop</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/opinion>Opinion</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/pandas>Pandas</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/production>Production</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/productivity>Productivity</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/python>Python</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/pytorch>Pytorch</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/spark>Spark</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/sql>SQL</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/statistics>Statistics</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/streamlit>Streamlit</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/text-classification>Text Classification</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/timeseries>Timeseries</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/tools>Tools</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/transformers>Transformers</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/translation>Translation</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/visualization>Visualization</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/xgboost>Xgboost</a></li></ul></div><div class=widget><h4 class=widget-title>Connect With Me</h4><ul class="list-inline social-links"><li class=list-inline-item><a href="www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=rahulagwl"><i class=ti-linkedin></i></a></li><li class=list-inline-item><a href=https://mlwhiz.medium.com/><i class=ti-book></i></a></li><li class=list-inline-item><a href=https://twitter.com/MLWhiz><i class=ti-twitter-alt></i></a></li><li class=list-inline-item><a href=https://www.facebook.com/mlwhizblog><i class=ti-facebook></i></a></li><li class=list-inline-item><a href=https://github.com/MLWhiz><i class=ti-github></i></a></li></ul></div><script async data-uid=bfe9f82f10 src=https://mlwhiz.ck.page/bfe9f82f10/index.js></script><script async data-uid=3452d924e2 src=https://mlwhiz.ck.page/3452d924e2/index.js></script></div></div></div></section><footer><div class=container><div class=row><div class="col-12 text-center mb-5"><a href=https://mlwhiz.com/><img src=https://mlwhiz.com/images/logos/mlwhiz_black.png class=img-fluid-custom-bottom alt="MLWhiz - Your Home for DS, ML, AI!"></a></div><div class="col-12 border-top py-4 text-center">Copyright © 2020 <a href=https://mlwhiz.com style=color:#972eb4>MLWhiz</a> All Rights Reserved</div></div></div></footer><script>var indexURL="https://mlwhiz.com/index.json"</script><script src=https://mlwhiz.com/plugins/compressjscss/main.js></script><script src=https://mlwhiz.com/js/script.min.js></script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-54777926-1','auto'),ga('send','pageview')</script></body></html>