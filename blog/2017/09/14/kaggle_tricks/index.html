<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>MLWhiz</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle">
  <meta name="author" content="Rahul Agarwal">
  <meta name="generator" content="Hugo 0.74.3" />

  
	<link rel='preload' href='//apps.shareaholic.com/assets/pub/shareaholic.js' as='script' />
	<script type="text/javascript" data-cfasync="false" async src="//apps.shareaholic.com/assets/pub/shareaholic.js" data-shr-siteid="fd1ffa7fd7152e4e20568fbe49a489d0"></script>
	

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://mlwhiz.com/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://mlwhiz.com/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://mlwhiz.com/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://mlwhiz.com/plugins/venobox/venobox.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://mlwhiz.com/scss/style.min.css" media="screen">
  <link rel="stylesheet" href="/css/style.css">

  <link rel="stylesheet" type="text/css" href="/css/font/flaticon.css" >

  <!--Favicon-->
  <link rel="shortcut icon" href="https://mlwhiz.com/images/favicon-200x200.png " type="image/x-icon">
  <link rel="icon" href="https://mlwhiz.com/images/favicon.png " type="image/x-icon">



  
  <script async data-uid="a0ebaf958d" src="https://mlwhiz.ck.page/a0ebaf958d/index.js"></script>
  <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>

</head>
<body>
      
   <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMQD44T"
   height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
   
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0">
      <a class="navbar-brand mobile-view" href="https://mlwhiz.com/"><img class="img-fluid"
          src="https://mlwhiz.com/images/logo.png" alt="MLWhiz"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h3"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <div class="desktop-view">
          <ul class="navbar-nav mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.linkedin.com/in/rahulagwl/"><i class="ti-linkedin"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://medium.com/@rahul_agarwal"><i class="ti-book"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://twitter.com/MLWhiz"><i class="ti-twitter-alt"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.facebook.com/mlwhizblog"><i class="ti-facebook"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/MLWhiz"><i class="ti-github"></i></a>
            </li>
            
          </ul>
        </div>

        <a class="navbar-brand mx-auto desktop-view" href="https://mlwhiz.com/"><img class="img-fluid-custom"
            src="https://mlwhiz.com/images/logo.png" alt="MLWhiz"></a>

        <ul class="navbar-nav">
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://mlwhiz.com/about">About</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://mlwhiz.com/blog">Blog</a>
          </li>
          
          
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">
              Topics
            </a>
            <div class="dropdown-menu">
              
              <a class="dropdown-item" href="https://mlwhiz.com/categories/natural-language-processing">NLP</a>
              
              <a class="dropdown-item" href="https://mlwhiz.com/categories/deep-learning">Computer Vision</a>
              
              <a class="dropdown-item" href="https://mlwhiz.com/categories/deep-learning">Deep Learning</a>
              
              <a class="dropdown-item" href="https://mlwhiz.com/categories/data-science">DS/ML</a>
              
              <a class="dropdown-item" href="https://mlwhiz.com/categories/big-data">Big Data</a>
              
              <a class="dropdown-item" href="https://mlwhiz.com/categories/awesome-guides">My Best Content</a>
              
              <a class="dropdown-item" href="https://mlwhiz.com/categories/learning-resources">Learning Resources</a>
              
            </div>
          </li>
          
          
        </ul>

        
        <!-- search -->
        <div class="search pl-lg-4">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://mlwhiz.com//search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        

        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation -->


<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mb-5 mb-lg-0">
        
        
        <a href="/categories/data-science"
          class="categoryStyle">Data Science</a>
        
        <h1>Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository</h1>
        <div class="mb-3 post-meta">
          <span>By Rahul Agarwal</span>
          
          <svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"></path></svg>

          <span>14 September 2017</span>
          
        </div>
        
        <img src="https://mlwhiz.com/images/category_bgs/default_bg.jpg" class="img-fluid w-100 mb-4" alt="Good Feature Building Techniques - Tricks for Kaggle -  My Kaggle Code Repository">
        
        <div class="content mb-5">
          <p>Often times it happens that we fall short of creativity. And creativity is one of the basic ingredients of what we do. Creating features needs creativity. So here is the list of ideas I gather in day to day life, where people have used creativity to get great results on Kaggle leaderboards.</p>
<p>Take a look at the <a href="https://www.coursera.org/specializations/aml?siteID=lVarvwc5BD0-AqkGMb7JzoCMW0Np1uLfCA&amp;utm_content=2&amp;utm_medium=partners&amp;utm_source=linkshare&amp;utm_campaign=lVarvwc5BD0">How to Win a Data Science Competition: Learn from Top Kagglers</a> course in the <a href="https://www.coursera.org/specializations/aml?siteID=lVarvwc5BD0-AqkGMb7JzoCMW0Np1uLfCA&amp;utm_content=2&amp;utm_medium=partners&amp;utm_source=linkshare&amp;utm_campaign=lVarvwc5BD0">Advanced machine learning specialization</a> by Kazanova(Number 3 Kaggler at the time of writing). You can start for free with the 7-day Free Trial.</p>
<p>This post is inspired by a <a href="https://www.kaggle.com/gaborfodor/from-eda-to-the-top-lb-0-368">Kernel</a> on Kaggle written by Beluga, one of the top Kagglers, for a knowledge based <a href="https://www.kaggle.com/c/nyc-taxi-trip-duration">competition</a>.</p>
<p>Some of the techniques/tricks I am sharing have been taken directly from that kernel so you could take a look yourself.
Otherwise stay here and read on.</p>
<h2 id="1-dont-try-predicting-the-future-when-you-dont-have-to">1. Don&rsquo;t try predicting the future when you don&rsquo;t have to:</h2>
<p>If both training/test comes from the same timeline, we can get really crafty with features. Although this is a case with Kaggle only, we can use this to our advantage. For example: In the Taxi Trip duration challenge the test data is randomly sampled from the train data. In this case we can use the target variable averaged over different categorical variable as a feature. Like in this case Beluga actually used the averaged the target variable over different weekdays. He then mapped the same averaged value as a variable by mapping it to test data too.</p>
<h2 id="2-logloss-clipping-technique">2. logloss clipping Technique:</h2>
<p>Something that I learned in the Neural Network course by Jeremy Howard. Its based on a very simple Idea. Logloss penalises a lot if we are very confident and wrong. So in case of Classification problems where we have to predict probabilities, it would be much better to clip our probabilities between 0.05-0.95 so that we are never very sure about our prediction.</p>
<h2 id="3-kaggle-submission-in-gzip-format">3. kaggle submission in gzip format:</h2>
<p>A small piece of code that will help you save countless hours of uploading. Enjoy.
df.to_csv(&lsquo;submission.csv.gz&rsquo;, index=False, compression='gzip&rsquo;)</p>
<h2 id="4-how-best-to-use-latitude-and-longitude-features---part-1">4. How best to use Latitude and Longitude features - Part 1:</h2>
<p>One of the best things that I liked about the Beluga Kernel is how he used the Lat/Lon Data. So in the example we had pickup Lat/Lon and Dropoff Lat/Lon. We created features like:</p>
<h4 id="a-haversine-distance-between-the-two-latlons">A. Haversine Distance Between the Two Lat/Lons:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">haversine_array</span>(lat1, lng1, lat2, lng2):
    lat1, lng1, lat2, lng2 <span style="color:#f92672">=</span> map(np<span style="color:#f92672">.</span>radians, (lat1, lng1, lat2, lng2))
    AVG_EARTH_RADIUS <span style="color:#f92672">=</span> <span style="color:#ae81ff">6371</span>  <span style="color:#75715e"># in km</span>
    lat <span style="color:#f92672">=</span> lat2 <span style="color:#f92672">-</span> lat1
    lng <span style="color:#f92672">=</span> lng2 <span style="color:#f92672">-</span> lng1
    d <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sin(lat <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> np<span style="color:#f92672">.</span>cos(lat1) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>cos(lat2) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>sin(lng <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>
    h <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> AVG_EARTH_RADIUS <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>arcsin(np<span style="color:#f92672">.</span>sqrt(d))
    <span style="color:#66d9ef">return</span> h
</code></pre></div><h4 id="b-manhattan-distance-between-the-two-latlons">B. Manhattan Distance Between the two Lat/Lons:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dummy_manhattan_distance</span>(lat1, lng1, lat2, lng2):
    a <span style="color:#f92672">=</span> haversine_array(lat1, lng1, lat1, lng2)
    b <span style="color:#f92672">=</span> haversine_array(lat1, lng1, lat2, lng1)
    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b
</code></pre></div><h4 id="c-bearing-between-the-two-latlons">C. Bearing Between the two Lat/Lons:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bearing_array</span>(lat1, lng1, lat2, lng2):
    AVG_EARTH_RADIUS <span style="color:#f92672">=</span> <span style="color:#ae81ff">6371</span>  <span style="color:#75715e"># in km</span>
    lng_delta_rad <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>radians(lng2 <span style="color:#f92672">-</span> lng1)
    lat1, lng1, lat2, lng2 <span style="color:#f92672">=</span> map(np<span style="color:#f92672">.</span>radians, (lat1, lng1, lat2, lng2))
    y <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sin(lng_delta_rad) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>cos(lat2)
    x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>cos(lat1) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>sin(lat2) <span style="color:#f92672">-</span> np<span style="color:#f92672">.</span>sin(lat1) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>cos(lat2) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>cos(lng_delta_rad)
    <span style="color:#66d9ef">return</span> np<span style="color:#f92672">.</span>degrees(np<span style="color:#f92672">.</span>arctan2(y, x))
</code></pre></div><h4 id="d-center-latitude-and-longitude-between-pickup-and-dropoff">D. Center Latitude and Longitude between Pickup and Dropoff:</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">train<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;center_latitude&#39;</span>] <span style="color:#f92672">=</span> (train[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>]<span style="color:#f92672">.</span>values <span style="color:#f92672">+</span> train[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>]<span style="color:#f92672">.</span>values) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
train<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;center_longitude&#39;</span>] <span style="color:#f92672">=</span> (train[<span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]<span style="color:#f92672">.</span>values <span style="color:#f92672">+</span> train[<span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]<span style="color:#f92672">.</span>values) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</code></pre></div><h2 id="5-how-best-to-use-latitude-and-longitude-features---part-2">5. How best to use Latitude and Longitude features - Part 2:</h2>
<p>The Second way he used the Lat/Lon Feats was to create clusters for Pickup and Dropoff Lat/Lons. The way it worked was it created sort of Boroughs in the data by design.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">from</span> sklearn.cluster <span style="color:#f92672">import</span> MiniBatchKMeans
coords <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>vstack((train[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]]<span style="color:#f92672">.</span>values,
                    train[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]]<span style="color:#f92672">.</span>values,
                    test[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]]<span style="color:#f92672">.</span>values,
                    test[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]]<span style="color:#f92672">.</span>values))

sample_ind <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>permutation(len(coords))[:<span style="color:#ae81ff">500000</span>]
kmeans <span style="color:#f92672">=</span> MiniBatchKMeans(n_clusters<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>, batch_size<span style="color:#f92672">=</span><span style="color:#ae81ff">10000</span>)<span style="color:#f92672">.</span>fit(coords[sample_ind])

train<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;pickup_cluster&#39;</span>] <span style="color:#f92672">=</span> kmeans<span style="color:#f92672">.</span>predict(train[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])
train<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;dropoff_cluster&#39;</span>] <span style="color:#f92672">=</span> kmeans<span style="color:#f92672">.</span>predict(train[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])
test<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;pickup_cluster&#39;</span>] <span style="color:#f92672">=</span> kmeans<span style="color:#f92672">.</span>predict(test[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])
test<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#39;dropoff_cluster&#39;</span>] <span style="color:#f92672">=</span> kmeans<span style="color:#f92672">.</span>predict(test[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])
</code></pre></div><p>He then used these Clusters to create features like counting no of trips going out and coming in on a particular day.</p>
<h2 id="6-how-best-to-use-latitude-and-longitude-features---part-3">6. How best to use Latitude and Longitude features - Part 3</h2>
<p>He used PCA to transform longitude and latitude coordinates. In this case it is not about dimension reduction since he transformed 2D-&gt; 2D. The rotation could help for decision tree splits, and it did actually.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">pca <span style="color:#f92672">=</span> PCA()<span style="color:#f92672">.</span>fit(coords)
train[<span style="color:#e6db74">&#39;pickup_pca0&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(train[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])[:, <span style="color:#ae81ff">0</span>]
train[<span style="color:#e6db74">&#39;pickup_pca1&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(train[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])[:, <span style="color:#ae81ff">1</span>]
train[<span style="color:#e6db74">&#39;dropoff_pca0&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(train[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])[:, <span style="color:#ae81ff">0</span>]
train[<span style="color:#e6db74">&#39;dropoff_pca1&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(train[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])[:, <span style="color:#ae81ff">1</span>]
test[<span style="color:#e6db74">&#39;pickup_pca0&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(test[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])[:, <span style="color:#ae81ff">0</span>]
test[<span style="color:#e6db74">&#39;pickup_pca1&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(test[[<span style="color:#e6db74">&#39;pickup_latitude&#39;</span>, <span style="color:#e6db74">&#39;pickup_longitude&#39;</span>]])[:, <span style="color:#ae81ff">1</span>]
test[<span style="color:#e6db74">&#39;dropoff_pca0&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(test[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])[:, <span style="color:#ae81ff">0</span>]
test[<span style="color:#e6db74">&#39;dropoff_pca1&#39;</span>] <span style="color:#f92672">=</span> pca<span style="color:#f92672">.</span>transform(test[[<span style="color:#e6db74">&#39;dropoff_latitude&#39;</span>, <span style="color:#e6db74">&#39;dropoff_longitude&#39;</span>]])[:, <span style="color:#ae81ff">1</span>]
</code></pre></div><h2 id="7-lets-not-forget-the-normal-things-you-can-do-with-your-features">7. Lets not forget the Normal Things you can do with your features:</h2>
<ul>
<li>Scaling by Max-Min</li>
<li>Normalization using Standard Deviation</li>
<li>Log based feature/Target: use log based features or log based target function.</li>
<li>One Hot Encoding</li>
</ul>
<h2 id="8-creating-intuitive-additional-features">8. Creating Intuitive Additional Features:</h2>
<p>A) Date time Features: Time based Features like &ldquo;Evening&rdquo;, &ldquo;Noon&rdquo;, &ldquo;Night&rdquo;, &ldquo;Purchases_last_month&rdquo;, &ldquo;Purchases_last_week&rdquo; etc.</p>
<p>B) Thought Features: Suppose you have shopping cart data and you want to categorize TripType (See Walmart Recruiting: Trip Type Classification on <a href="https://www.kaggle.com/c/walmart-recruiting-trip-type-classification/">Kaggle</a> for some background).</p>
<p>You could think of creating a feature like &ldquo;Stylish&rdquo; where you create this variable by adding together number of items that belong to category Men&rsquo;s Fashion, Women&rsquo;s Fashion, Teens Fashion.</p>
<p>You could create a feature like &ldquo;Rare&rdquo; which is created by tagging some items as rare, based on the data we have and then counting the number of those rare items in the shopping cart. Such features might work or might not work. From what I have observed they normally provide a lot of value.</p>
<p>I feel this is the way that Target&rsquo;s &ldquo;Pregnant Teen model&rdquo; was made. They would have had a variable in which they kept all the items that a pregnant teen could buy and put it into a classification algorithm.</p>
<h2 id="9--the-not-so-normal-things-which-people-do">9 . The not so Normal Things which people do:</h2>
<p>These features are highly unintuitive and should not be created where the machine learning model needs to be interpretable.</p>
<p>A) Interaction Features: If you have features A and B create features A*B, A+B, A/B, A-B. This explodes the feature space. If you have 10 features and you are creating two variable interactions you will be adding 10C2 * 4  features = 180 features to your model. And most of us have a lot more than 10 features.</p>
<p>B) Bucket Feature Using Hashing: Suppose you have a lot of features. In the order of Thousands but you don&rsquo;t want to use all the thousand features because of the training times of algorithms involved. People bucket their features using some hashing algorithm to achieve this.Mostly done for text classification tasks.
For example:
If we have 6 features A,B,C,D,E,F.
And the row of data is:
A:1,B:1,C:1,D:0,E:1,F:0
I may decide to use a hashing function so that these 6 features correspond to 3 buckets and create the data using this feature hashing vector.
After processing my data might look like:
Bucket1:2,Bucket2:2,Bucket3:0
Which happened because A and B fell in bucket1, C and E fell in bucket2 and D and F fell in bucket 3. I summed up the observations here, but you could substitute addition with any math function you like.
Now i would use Bucket1,Bucket2,Bucket3 as my variables for machine learning.</p>
<p>Will try to keep on expanding. Wait for more&hellip;.</p>


        
<script async data-uid="8d7942551b" src="https://mlwhiz.ck.page/8d7942551b/index.js"></script>


<div class="shareaholic-canvas" data-app="share_buttons" data-app-id="28372088" style="margin-bottom: 1px;"></div>

<a href="https://click.linksynergy.com/fs-bin/click?id=lVarvwc5BD0&offerid=467035.372&subid=0&type=4" rel="nofollow"><IMG border="0"   alt="Start your future with a Data Science Certificate." src="https://ad.linksynergy.com/fs-bin/show?id=lVarvwc5BD0&bids=467035.372&subid=0&type=4&gridnum=16"></a>

<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "mlwhiz" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        </div>
      </div>
      <div class="col-lg-4">
  

  <div class="widget">
    
<script type='text/javascript' src='https://ko-fi.com/widgets/widget_2.js'></script><script type='text/javascript'>kofiwidget2.init('Support Me on Ko-fi', '#00aaa1', 'S6S3NPCD');kofiwidget2.draw();</script>

</div>
  <div class="widget">
    
    <h4 class="widget-title">About Me</h4>
    
    <img src="https://mlwhiz.com/images/author.jpg" alt=""
      class="img-fluid author-thumb-sm d-block mx-auto rounded-circle mb-4">
    
    <p>I’m a data scientist consultant and big data engineer based in Bangalore, where I am currently working with WalmartLabs .</p>
    <a href="https://mlwhiz.com/about/" class="btn btn-outline-primary">Know More</a>
    
  </div>


  
  <div class="widget">
    <h4 class="widget-title">Topics</h4>
    <ul class="list-unstyled">
      <li><a class="categoryStyle" style="color:#fff"
          href="/categories/awesome-guides">Awesome Guides</a>
      </li>
      <li><a class="categoryStyle" style="color:#fff"
          href="/categories/big-data">Big Data</a>
      </li>
      <li><a class="categoryStyle" style="color:#fff"
          href="/categories/computer-vision">Computer Vision</a>
      </li>
      <li><a class="categoryStyle" style="color:#fff"
          href="/categories/data-science">Data Science</a>
      </li>
      <li><a class="categoryStyle" style="color:#fff"
          href="/categories/deep-learning">Deep Learning</a>
      </li>
      <li><a class="categoryStyle" style="color:#fff"
          href="/categories/learning-resources">Learning Resources</a>
      </li>
      <li><a class="categoryStyle" style="color:#fff"
          href="/categories/natural-language-processing">Natural Language Processing</a>
      </li>
      <li><a class="categoryStyle" style="color:#fff"
          href="/categories/programming">Programming</a>
      </li>
    </ul>
  </div>
  
  <div class="widget">
    <h4 class="widget-title">Tags</h4>
    <ul class="list-inline">


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/algorithms">Algorithms</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/artificial-intelligence">Artificial Intelligence</a></li>
          


          


          


          


          


          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/dask">Dask</a></li>
          


          


          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/deployment">Deployment</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/ec2">Ec2</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/generative-adversarial-networks">Generative Adversarial Networks</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/graphs">Graphs</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/image-classification">Image Classification</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/instance-segmentation">Instance Segmentation</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/interpretability">Interpretability</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/jobs">Jobs</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/kaggle">Kaggle</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/machine-learning">Machine Learning</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/math">Math</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/multiprocessing">Multiprocessing</a></li>
          


          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/object-detection">Object Detection</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/opinion">Opinion</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/pandas">Pandas</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/production">Production</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/productivity">Productivity</a></li>
          


          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/python">Python</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/pytorch">Pytorch</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/spark">Spark</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/sql">Sql</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/statistics">Statistics</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/streamlit">Streamlit</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/text-classification">Text Classification</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/timeseries">Timeseries</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/tools">Tools</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/visualization">Visualization</a></li>
          


          
          <li class="list-inline-item"><a class="tagStyle text-white"
              href="/tags/xgboost">Xgboost</a></li>
          
    </ul>
  </div>
  
  <div class="widget">
    <h4 class="widget-title">Connect With Me</h4>
    <ul class="list-inline social-links">
      
      <li class="list-inline-item"><a href="https://www.linkedin.com/in/rahulagwl/"><i class="ti-linkedin"></i></a></li>
      
      <li class="list-inline-item"><a href="https://medium.com/@rahul_agarwal"><i class="ti-book"></i></a></li>
      
      <li class="list-inline-item"><a href="https://twitter.com/MLWhiz"><i class="ti-twitter-alt"></i></a></li>
      
      <li class="list-inline-item"><a href="https://www.facebook.com/mlwhizblog"><i class="ti-facebook"></i></a></li>
      
      <li class="list-inline-item"><a href="https://github.com/MLWhiz"><i class="ti-github"></i></a></li>
      
    </ul>
  </div>
  
  
<script async data-uid="bfe9f82f10" src="https://mlwhiz.ck.page/bfe9f82f10/index.js"></script>

<script async data-uid="3452d924e2" src="https://mlwhiz.ck.page/3452d924e2/index.js"></script>

</div>

    </div>


  </div>
</section>



<footer>
  <div class="container">
    <div class="row">
      <div class="col-12 text-center mb-5">
        <a href="https://mlwhiz.com/"><img src="https://mlwhiz.com/images/logo.png" class="img-fluid-custom-bottom" alt="MLWhiz"></a>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Contact Me</h6>
        <ul class="list-unstyled">
          <li class="mb-3"><i class="ti-location-pin mr-3 text-primary"></i>India, Bangalore</li>
          <li class="mb-3"><a class="text-dark" href="mailto:rahul@mlwhiz.com"><i
                class="ti-email mr-3 text-primary"></i>rahul@mlwhiz.com</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Social Contacts</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="https://www.linkedin.com/in/rahulagwl/">Linkedin</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://medium.com/@rahul_agarwal">Medium</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://twitter.com/MLWhiz">Twitter</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://www.facebook.com/mlwhizblog">Facebook</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://github.com/MLWhiz">Github</a></li>
          
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Categories</h6>
        <ul class="list-unstyled">
          <li class="mb-3"><a class="text-dark"
              href="/categories/awesome-guides">Awesome Guides</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/big-data">Big Data</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/computer-vision">Computer Vision</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/data-science">Data Science</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/deep-learning">Deep Learning</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/learning-resources">Learning Resources</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/natural-language-processing">Natural Language Processing</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/programming">Programming</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Quick Links</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="https://mlwhiz.com/about">About</a></li>
          
          
          <li class="mb-3"><a class="text-dark" href="https://mlwhiz.com/blog">Post</a></li>
          
          
          
        </ul>
      </div>
      <div class="col-12 border-top py-4 text-center">
        Copyright © 2020 <a href="https://mlwhiz.com">MLWhiz</a> All Rights Reserved
      </div>
    </div>
  </div>
</footer>

<script>
  var indexURL = "https://mlwhiz.com/index.json"
</script>

<!-- JS Plugins -->

<script src="https://mlwhiz.com/plugins/jQuery/jquery.min.js"></script>

<script src="https://mlwhiz.com/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://mlwhiz.com/plugins/slick/slick.min.js"></script>

<script src="https://mlwhiz.com/plugins/venobox/venobox.min.js"></script>

<script src="https://mlwhiz.com/plugins/search/fuse.min.js"></script>

<script src="https://mlwhiz.com/plugins/search/mark.js"></script>

<script src="https://mlwhiz.com/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://mlwhiz.com/js/script.min.js"></script>
<!-- google analitycs -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-54777926-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
