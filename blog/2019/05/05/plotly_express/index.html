<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Python’s One Liner graph creation library with animations Hans Rosling Style - MLWhiz</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Some awesome visualizations using Plotly Express. Create Hans Rosling animations with a single line of code."><meta name=author content="Rahul Agarwal"><meta name=generator content="Hugo 0.82.0"><link rel=stylesheet href=https://mlwhiz.com/plugins/compressjscss/main.css><meta property="og:title" content="Python’s One Liner graph creation library with animations Hans Rosling Style - MLWhiz"><meta property="og:description" content="Some awesome visualizations using Plotly Express. Create Hans Rosling animations with a single line of code."><meta property="og:type" content="article"><meta property="og:url" content="https://mlwhiz.com/blog/2019/05/05/plotly_express/"><meta property="og:image" content="https://mlwhiz.com/images/plotly_ex/visualization.png"><meta property="og:image:secure_url" content="https://mlwhiz.com/images/plotly_ex/visualization.png"><meta property="article:published_time" content="2019-05-05T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-13T13:34:49+01:00"><meta property="article:tag" content="Data Science"><meta name=twitter:card content="summary"><meta name=twitter:image content="https://mlwhiz.com/images/plotly_ex/visualization.png"><meta name=twitter:title content="Python’s One Liner graph creation library with animations Hans Rosling Style - MLWhiz"><meta name=twitter:description content="Some awesome visualizations using Plotly Express. Create Hans Rosling animations with a single line of code."><meta name=twitter:site content="@mlwhiz"><meta name=twitter:creator content="@mlwhiz"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href=https://mlwhiz.com/scss/style.min.css media=screen><link rel=stylesheet href=/css/style.css><link rel=stylesheet type=text/css href=/css/font/flaticon.css><link rel="shortcut icon" href=https://mlwhiz.com/images/favicon-200x200.png type=image/x-icon><link rel=icon href=https://mlwhiz.com/images/favicon.png type=image/x-icon><link rel=canonical href=https://mlwhiz.com/blog/2019/05/05/plotly_express/><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://www.mlwhiz.com/#website","url":"https://www.mlwhiz.com/","name":"MLWhiz","description":"Want to Learn Computer Vision and NLP? - MLWhiz","potentialAction":{"@type":"SearchAction","target":"https://www.mlwhiz.com/search?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"ImageObject","@id":"https://mlwhiz.com/blog/2019/05/05/plotly_express/#primaryimage","url":"https://mlwhiz.com/images/plotly_ex/visualization.png","width":700,"height":450},{"@type":"WebPage","@id":"https://mlwhiz.com/blog/2019/05/05/plotly_express/#webpage","url":"https://mlwhiz.com/blog/2019/05/05/plotly_express/","inLanguage":"en-US","name":"Python’s One Liner graph creation library with animations Hans Rosling Style - MLWhiz","isPartOf":{"@id":"https://www.mlwhiz.com/#website"},"primaryImageOfPage":{"@id":"https://mlwhiz.com/blog/2019/05/05/plotly_express/#primaryimage"},"datePublished":"2019-05-05T00:00:00.00Z","dateModified":"2022-04-13T13:34:49.00Z","author":{"@id":"https://mlwhiz.com/about/#/schema/person/76376876bchxkzbchjsdjcca"},"description":"Some awesome visualizations using Plotly Express. Create Hans Rosling animations with a single line of code."},{"@type":["Person"],"@id":"https://mlwhiz.com/about/#/schema/person/76376876bchxkzbchjsdjcca","name":"Rahul Agarwal","image":{"@type":"ImageObject","@id":"https://www.mlwhiz.com/#authorlogo","url":"https://mlwhiz.com/images/author.jpg","caption":"Rahul Agarwal"},"description":"Hi there, I\u2019m Rahul Agarwal. I\u2019m a data scientist consultant and big data engineer based in Bangalore. I see a lot of times  students and even professionals wasting their time and struggling to get started with Computer Vision, Deep Learning, and NLP. I Started this Site with a purpose to augment my own understanding about new things while helping others learn about them in the best possible way.","sameAs":["https://www.linkedin.com/in/rahulagwl/","https://medium.com/@rahul_agarwal","https://twitter.com/MLWhiz","https://www.facebook.com/mlwhizblog","https://github.com/MLWhiz","https://www.instagram.com/itsmlwhiz"]}]}</script><script async data-uid=a0ebaf958d src=https://mlwhiz.ck.page/a0ebaf958d/index.js></script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$']],processEscapes:!0,processEnvironments:!0,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var b=MathJax.Hub.getAllJax(),a;for(a=0;a<b.length;a+=1)b[a].SourceElement().parentNode.className+=' has-jax'}),MathJax.Hub.Config({TeX:{equationNumbers:{autoNumber:"AMS"}}})</script><link href=//apps.shareaholic.com/assets/pub/shareaholic.js as=script><script type=text/javascript data-cfasync=false async src=//apps.shareaholic.com/assets/pub/shareaholic.js data-shr-siteid=fd1ffa7fd7152e4e20568fbe49a489d0></script><script>!function(b,e,f,g,a,c,d){if(b.fbq)return;a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version='2.0',a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js'),fbq('init','402633927768628'),fbq('track','PageView')</script><noscript><img height=1 width=1 style=display:none src="https://www.facebook.com/tr?id=402633927768628&ev=PageView&noscript=1"></noscript><meta property="fb:pages" content="213104036293742"><meta name=facebook-domain-verification content="qciidcy7mm137sewruizlvh8zbfnv4"></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMQD44T" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div class=preloader></div><header class=navigation><div class=container><nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0"><a class="navbar-brand mobile-view" href=https://mlwhiz.com/><img class=img-fluid src=https://mlwhiz.com/images/logo.png alt="Helping You Learn Data Science!"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class="ti-menu h3"></i></button><div class="collapse navbar-collapse text-center" id=navigation><div class=desktop-view><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=https://www.linkedin.com/in/rahulagwl/><i class=ti-linkedin></i></a></li><li class=nav-item><a class=nav-link href=https://mlwhiz.medium.com/><i class=ti-book></i></a></li><li class=nav-item><a class=nav-link href=https://twitter.com/MLWhiz><i class=ti-twitter-alt></i></a></li><li class=nav-item><a class=nav-link href=https://www.facebook.com/mlwhizblog><i class=ti-facebook></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/MLWhiz><i class=ti-github></i></a></li></ul></div><a class="navbar-brand mx-auto desktop-view" href=https://mlwhiz.com/><img class=img-fluid-custom src=https://mlwhiz.com/images/logo.png alt="Helping You Learn Data Science!"></a><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://mlwhiz.com/about>About</a></li><li class=nav-item><a class=nav-link href=https://mlwhiz.com/blog>Blog</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Topics</a><div class=dropdown-menu><a class=dropdown-item href=https://mlwhiz.com/categories/natural-language-processing>NLP</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/computer-vision>Computer Vision</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/deep-learning>Deep Learning</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/data-science>DS/ML</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/big-data>Big Data</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/awesome-guides>My Best Content</a>
<a class=dropdown-item href=https://mlwhiz.com/categories/learning-resources>Learning Resources</a></div></li></ul><div class="search pl-lg-4"><button id=searchOpen class=search-btn><i class=ti-search></i></button><div class=search-wrapper><form action=https://mlwhiz.com//search class=h-100><input class="search-box px-4" id=search-query name=s type=search placeholder="Type & Hit Enter..."></form><button id=searchClose class=search-close><i class="ti-close text-dark"></i></button></div></div></div></nav></div></header><section class=section-sm><div class=container><div class=row><div class="col-lg-8 mb-5 mb-lg-0"><a href=/categories/data-science class=categoryStyle>Data Science</a><h1>Python’s One Liner graph creation library with animations Hans Rosling Style</h1><div class="mb-3 post-meta"><span>By Rahul Agarwal</span><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
<span>05 May 2019</span></div><img src=https://mlwhiz.com/images/plotly_ex/visualization.png class="img-fluid w-100 mb-4" alt="Python’s One Liner graph creation library with animations Hans Rosling Style"><div class="content mb-5"><p>I distinctly remember the time when Seaborn came. I was really so fed up with Matplotlib. To create even simple graphs I had to run through so many StackOverflow threads.</p><p><em><strong>The time I could have spent in thinking good ideas for presenting my data was being spent in handling Matplotlib. And it was frustrating.</strong></em></p><p>Seaborn is much better than Matplotlib, yet it also demands a lot of code for a simple “good looking” graph.</p><p>When Plotly came it tried to solve that problem. And when added with Pandas, plotly is a great tool.</p><p>Just using the iplot function, you can do so much with Plotly.</p><p><em><strong>But still, it is not very intuitive. At least not for me.</strong></em></p><p>I still didn’t switch to Plotly just because I had spent enough time with Seaborn to do things “quickly” enough and I didn’t want to spend any more time learning a new visualization library. I had created
<a href="https://towardsdatascience.com/3-awesome-visualization-techniques-for-every-dataset-9737eecacbe8?source=friends_link&sk=e32fe5bcd7d6553fca6d7f371980089f" target=_blank rel="nofollow noopener">my own functions</a>
in Seaborn to create the visualizations I most needed. <em><strong>Yet it was still a workaround. I had given up hope of having anything better.</strong></em></p><p>Comes <em><strong>Plotly Express</strong></em> in the picture. And is it awesome?</p><p>According to the creators of Plotly Express (who also created Plotly obviously), <em><strong>Plotly Express is to Plotly what Seaborn is to Matplotlib.</strong></em></p><blockquote><h1 id=a-terse-consistent-high-level-wrapper-around-plotlypy-for-rapid-data-exploration-and-figure-generation>A terse, consistent, high-level wrapper around Plotly.py for rapid data exploration and figure generation.</h1></blockquote><p>I just had to try it out.</p><p>And have the creators made it easy to start experimenting with it?</p><p><em><strong>One-liners to do everything you want?</strong></em> ✅</p><p><em><strong>Standardized functions?</strong></em> Learn to create a scatterplot and you have pretty much learned this tool — ✅</p><p><strong>Interactive graphs?</strong> ✅</p><p><strong>Animations?</strong> Racing Bar plots, Scatter plots with time, Maps ✅</p><p><strong>Free and Open Source?</strong> ✅</p><p>Just a sneak peek of what we will be able to create(and more) by the end of this post. <em><strong>Using a single line of code.</strong></em></p><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/animated1.gif "></center></div><p>Ok enough of the talk, let’s get to it.</p><h2 id=first-the-dataset--interesting-depressing-and-inspiring-all-at-once>First the Dataset — Interesting, Depressing and Inspiring all at once</h2><p><img src=https://cdn-images-1.medium.com/max/3600/1*VL1Vl8hJk7Kfka5atIzH8Q.png alt="MLWhiz: Data Science, Machine Learning, Artificial Intelligence"></p><p>We will be working with the
<a href=https://www.kaggle.com/russellyates88/suicide-rates-overview-1985-to-2016 target=_blank rel="nofollow noopener">Suicide dataset</a>
I took from Kaggle. This dataset is compiled from data taken from the UN, World Bank and World Health Organization. <em><strong>The dataset was accumulated with the inspiration for Suicide Prevention. I am always up for such good use of data.</strong></em></p><p>You can find all the code for this post and run it yourself in this
<a href=https://www.kaggle.com/mlwhiz/plotly-express/ target=_blank rel="nofollow noopener">Kaggle Kernel</a></p><p>First I will do some data Cleaning to add continent information and Country ISO codes as they will be helpful later:</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>pandas</span> <span style=color:#6ab825;font-weight:700>as</span> <span style=color:#447fcf;text-decoration:underline>pd</span>
<span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>numpy</span> <span style=color:#6ab825;font-weight:700>as</span> <span style=color:#447fcf;text-decoration:underline>np</span>
<span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>plotly_express</span> <span style=color:#6ab825;font-weight:700>as</span> <span style=color:#447fcf;text-decoration:underline>px</span>

<span style=color:#999;font-style:italic># Suicide Data</span>
suicides = pd.read_csv(<span style=color:#ed9d13>&#34;../input/suicide-rates-overview-1985-to-2016/master.csv&#34;</span>)
<span style=color:#6ab825;font-weight:700>del</span> suicides[<span style=color:#ed9d13>&#39;HDI for year&#39;</span>]
<span style=color:#6ab825;font-weight:700>del</span> suicides[<span style=color:#ed9d13>&#39;country-year&#39;</span>]

<span style=color:#999;font-style:italic># Country ISO Codes</span>
iso_country_map = pd.read_csv(<span style=color:#ed9d13>&#34;../input/countries-iso-codes/wikipedia-iso-country-codes.csv&#34;</span>)
iso_country_map = iso_country_map.rename(columns = {<span style=color:#ed9d13>&#39;English short name lower case&#39;</span>:<span style=color:#ed9d13>&#34;country&#34;</span>})

<span style=color:#999;font-style:italic># Load Country Continents file</span>
concap =pd.read_csv(<span style=color:#ed9d13>&#34;../input/country-to-continent/countryContinent.csv&#34;</span>, encoding=<span style=color:#ed9d13>&#39;iso-8859-1&#39;</span>)[[<span style=color:#ed9d13>&#39;code_3&#39;</span>, <span style=color:#ed9d13>&#39;continent&#39;</span>, <span style=color:#ed9d13>&#39;sub_region&#39;</span>]]
concap = concap.rename(columns = {<span style=color:#ed9d13>&#39;code_3&#39;</span>:<span style=color:#ed9d13>&#34;Alpha-3 code&#34;</span>})

correct_names = {<span style=color:#ed9d13>&#39;Cabo Verde&#39;</span>: <span style=color:#ed9d13>&#39;Cape Verde&#39;</span>, <span style=color:#ed9d13>&#39;Macau&#39;</span>: <span style=color:#ed9d13>&#39;Macao&#39;</span>, <span style=color:#ed9d13>&#39;Republic of Korea&#39;</span>: <span style=color:#ed9d13>&#34;Korea, Democratic People&#39;s Republic of&#34;</span> ,
 <span style=color:#ed9d13>&#39;Russian Federation&#39;</span>: <span style=color:#ed9d13>&#39;Russia&#39;</span>,
 <span style=color:#ed9d13>&#39;Saint Vincent and Grenadines&#39;</span>:<span style=color:#ed9d13>&#39;Saint Vincent and the Grenadines&#39;</span>
 , <span style=color:#ed9d13>&#39;United States&#39;</span>: <span style=color:#ed9d13>&#39;United States Of America&#39;</span>}

<span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>correct_country</span>(x):
    <span style=color:#6ab825;font-weight:700>if</span> x <span style=color:#6ab825;font-weight:700>in</span> correct_names:
        <span style=color:#6ab825;font-weight:700>return</span> correct_names[x]
    <span style=color:#6ab825;font-weight:700>else</span>:
        <span style=color:#6ab825;font-weight:700>return</span> x

suicides[<span style=color:#ed9d13>&#39;country&#39;</span>] = suicides[<span style=color:#ed9d13>&#39;country&#39;</span>].apply(<span style=color:#6ab825;font-weight:700>lambda</span> x : correct_country(x))

suicides = pd.merge(suicides,iso_country_map,on=<span style=color:#ed9d13>&#39;country&#39;</span>,how=<span style=color:#ed9d13>&#39;left&#39;</span>)
suicides = pd.merge(suicides,concap,on=<span style=color:#ed9d13>&#39;Alpha-3 code&#39;</span>,how=<span style=color:#ed9d13>&#39;left&#39;</span>)

suicides[<span style=color:#ed9d13>&#39;gdp&#39;</span>] = suicides[<span style=color:#ed9d13>&#39;gdp_per_capita ($)&#39;</span>]*suicides[<span style=color:#ed9d13>&#39;population&#39;</span>]
</code></pre></div><p>Let us look at the suicides data:</p><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/data_img.png "></center></div><p>I will also group the data by continents. Honestly, I am doing this only to show the power of the library as the main objective of this post will still be to create awesome visualizations.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>suicides_gby_Continent = suicides.groupby([<span style=color:#ed9d13>&#39;continent&#39;</span>,<span style=color:#ed9d13>&#39;sex&#39;</span>,<span style=color:#ed9d13>&#39;year&#39;</span>]).aggregate(np.sum).reset_index()

suicides_gby_Continent[<span style=color:#ed9d13>&#39;gdp_per_capita ($)&#39;</span>] = suicides_gby_Continent[<span style=color:#ed9d13>&#39;gdp&#39;</span>]/suicides_gby_Continent[<span style=color:#ed9d13>&#39;population&#39;</span>]

suicides_gby_Continent[<span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>] = suicides_gby_Continent[<span style=color:#ed9d13>&#39;suicides_no&#39;</span>]*<span style=color:#3677a9>1000</span>/suicides_gby_Continent[<span style=color:#ed9d13>&#39;population&#39;</span>]

<span style=color:#999;font-style:italic># 2016 data is not full</span>
suicides_gby_Continent=suicides_gby_Continent[suicides_gby_Continent[<span style=color:#ed9d13>&#39;year&#39;</span>]!=<span style=color:#3677a9>2016</span>]

suicides_gby_Continent.head()
</code></pre></div><p>The final data we created:</p><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/data_2.png "></center></div><h2 id=simplicity-of-use>Simplicity of use</h2><p>We are ready to visualize our data. Comes <em><strong>Plotly Express</strong></em> time. I can install it just by a simple:</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pip install plotly_express
</code></pre></div><p>and import it as:</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>plotly_express</span> <span style=color:#6ab825;font-weight:700>as</span> <span style=color:#447fcf;text-decoration:underline>px</span>
</code></pre></div><p>Now let us create a simple scatter plot with it.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>suicides_gby_Continent_2007 = suicides_gby_Continent[suicides_gby_Continent[<span style=color:#ed9d13>&#39;year&#39;</span>]==<span style=color:#3677a9>2007</span>]

px.scatter(suicides_gby_Continent_2007,x = <span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>, y = <span style=color:#ed9d13>&#39;gdp_per_capita ($)&#39;</span>)
</code></pre></div><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/point_plot.png "></center></div><p>Not very inspiring. Right. Let us make it better step by step. Lets color the points by Continent.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>px.scatter(suicides_gby_Continent_2007,x = <span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>, y = <span style=color:#ed9d13>&#39;gdp_per_capita ($)&#39;</span>,color=<span style=color:#ed9d13>&#39;continent&#39;</span>)
</code></pre></div><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/colored_point_plot.png "></center></div><p><strong>Better but not inspiring. YET.</strong></p><p><strong>The points look so small</strong>. Right. Let us increase the point size. How? What could the parameter be….</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>px.scatter(suicides_gby_Continent_2007,x = <span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>, y = <span style=color:#ed9d13>&#39;gdp_per_capita ($)&#39;</span>,color=<span style=color:#ed9d13>&#39;ContinentName&#39;</span>,size =<span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>)
</code></pre></div><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/sized_point_plot.png "></center></div><p><strong>Can you see there are two points for every continent?</strong> They are for male and female. Let me show that in the graph. We can show this distinction using a couple of ways. <em><strong>We can use different symbol or use different facets for male and female.</strong></em></p><p>Let me show them both.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>px.scatter(suicides_gby_Continent_2007,x = <span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>, y = <span style=color:#ed9d13>&#39;gdp_per_capita ($)&#39;</span>, size = <span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>, color=<span style=color:#ed9d13>&#39;ContinentName&#39;</span>,symbol=<span style=color:#ed9d13>&#39;sex&#39;</span>)
</code></pre></div><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/facet1.png "></center></div><p><img src=https://cdn-images-1.medium.com/max/2000/1*H12_tRVLrX8znkb7WWicvw.png alt="MLWhiz: Data Science, Machine Learning, Artificial Intelligence"></p><p>We could also create a faceted plot.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>px.scatter(suicides_gby_Continent_2007,x = <span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>, y = <span style=color:#ed9d13>&#39;gdp_per_capita ($)&#39;</span>, size = <span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>, color=<span style=color:#ed9d13>&#39;continent&#39;</span>,facet_col=<span style=color:#ed9d13>&#39;sex&#39;</span>)
</code></pre></div><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/facet2.png "></center></div><p>The triangles are for male and the circles are for females in the symbol chart. <em><strong>We are already starting to see some good info from the chart.</strong></em> For example:</p><ul><li><p>There is a significant difference between the suicide rates of Male vs Females at least in 2007 data.</p></li><li><p><em><strong>European Males were highly susceptible to Suicide in 2007?</strong></em></p></li><li><p>The income disparity doesn’t seem to play a big role in suicide rates. Asia has a lower GDP per capita and a lower suicide rate than Europe.</p></li><li><p><em><strong>There doesn’t seem to be income disparity amongst males and females.</strong></em></p></li></ul><p>Still not inspiring? Umm. <em><strong>Let us add some animation</strong></em>. That shouldn’t have to be hard. I will just add some more parameters,</p><ul><li><p>animation_frame which specifies what will be our animation dimension.</p></li><li><p>range of x and y values using range_y and range_x</p></li><li><p>text which labels all points with continents. Helps in visualizing data better</p></li></ul><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>px.scatter(suicides_gby_Continent,x = <span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>, y = <span style=color:#ed9d13>&#39;gdp_per_capita ($)&#39;</span>,color=<span style=color:#ed9d13>&#39;continent&#39;</span>,
               size=<span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>,symbol=<span style=color:#ed9d13>&#39;sex&#39;</span>,animation_frame=<span style=color:#ed9d13>&#39;year&#39;</span>, animation_group=<span style=color:#ed9d13>&#39;continent&#39;</span>,range_x = [<span style=color:#3677a9>0</span>,<span style=color:#3677a9>0.6</span>],
              range_y = [<span style=color:#3677a9>0</span>,<span style=color:#3677a9>70000</span>],text=<span style=color:#ed9d13>&#39;continent&#39;</span>)
</code></pre></div><div style=margin-top:9px;margin-bottom:10px><center><img src=/images/plotly_ex/animated1.gif "></center></div><p><strong>Wait for the gif plot to show.</strong></p><p>In the Jupyter notebook, you will be able to stop the visualization, hover over the points, just look at a particular continent and do so much more with interactions.</p><p>So much information with a single command. We can see that:</p><ul><li><p>From 1991–2001 European Males had a pretty bad Suicide rate.</p></li><li><p>Oceania even after having a pretty high GDP per capita, it is still susceptible to suicides.</p></li><li><p>Africa has lower suicide rates as compared to other countries.</p></li><li><p>For the Americas, the suicide rates have been increasing gradually.</p></li></ul><p><em><strong>All of my above observations would warrant more analysis. But that is the point of having so much information on a single graph. It will help you to come up with a lot of hypotheses.</strong></em></p><p>The above style of the plot is known as <strong>Hans Rosling plot</strong> named after its founder.</p><p>Here I would ask you to see this presentation from Hans Rosling where he uses Gapminder data to explain how income and lifespan emerged in the world through years. See it. It&rsquo;s great.</p><center><iframe width=560 height=315 src=https://www.youtube.com/embed/jbkSRLYSojo frameborder=0 allowfullscreen></iframe></center><h2 id=function-standardization>Function Standardization</h2><p><em><strong>So till now, we have learned about scatter plots. So much time to just learn a single class of charts.</strong></em> In the start of my post, I told you that this library has a sort of standardized functions.</p><p>Let us specifically look at European data as we saw that European males have a high Suicide rate.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>european_suicide_data = suicides[suicides[<span style=color:#ed9d13>&#39;continent&#39;</span>] ==<span style=color:#ed9d13>&#39;Europe&#39;</span>]
european_suicide_data_gby = european_suicide_data.groupby([<span style=color:#ed9d13>&#39;age&#39;</span>,<span style=color:#ed9d13>&#39;sex&#39;</span>,<span style=color:#ed9d13>&#39;year&#39;</span>]).aggregate(np.sum).reset_index()
european_suicide_data_gby[<span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>] = european_suicide_data_gby[<span style=color:#ed9d13>&#39;suicides_no&#39;</span>]*<span style=color:#3677a9>1000</span>/european_suicide_data_gby[<span style=color:#ed9d13>&#39;population&#39;</span>]


<span style=color:#999;font-style:italic># A single line to create an animated Bar chart too.</span>
px.bar(european_suicide_data_gby,x=<span style=color:#ed9d13>&#39;age&#39;</span>,y=<span style=color:#ed9d13>&#39;suicides/100k pop&#39;</span>,facet_col=<span style=color:#ed9d13>&#39;sex&#39;</span>,animation_frame=<span style=color:#ed9d13>&#39;year&#39;</span>,
       animation_group=<span style=color:#ed9d13>&#39;age&#39;</span>,
       category_orders={<span style=color:#ed9d13>&#39;age&#39;</span>:[<span style=color:#ed9d13>&#39;5-14 years&#39;</span>, <span style=color:#ed9d13>&#39;15-24 years&#39;</span>, <span style=color:#ed9d13>&#39;25-34 years&#39;</span>, <span style=color:#ed9d13>&#39;35-54 years&#39;</span>,
       <span style=color:#ed9d13>&#39;55-74 years&#39;</span>, <span style=color:#ed9d13>&#39;75+ years&#39;</span>]},range_y=[<span style=color:#3677a9>0</span>,<span style=color:#3677a9>1</span>])
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/2328/1*F1AvmKFQdWB3uswpj2Au_g.gif alt="MLWhiz: Data Science, Machine Learning, Artificial Intelligence"></p><p>Just like that, we have learned about animating our bar plots too. In the function above I provide a category_order for the axes to force the order of categories since they are ordinal. Rest all is still the same.</p><p><em>We can see that from 1991 to 2001 the suicide rate of 75+ males was very high. That might have increased the overall suicide rate for males.</em></p><p><em><strong>Want to see how the suicide rates decrease in a country using a map?</strong></em> That is why we got the ISO-codes for the country in the data.</p><p>How many lines should that take? You guessed right. One.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>suicides_map = suicides.groupby([<span style=color:#ed9d13>&#39;year&#39;</span>,<span style=color:#ed9d13>&#39;country&#39;</span>,<span style=color:#ed9d13>&#39;Alpha-3 code&#39;</span>]).aggregate(np.sum).reset_index()[[<span style=color:#ed9d13>&#39;country&#39;</span>,<span style=color:#ed9d13>&#39;Alpha-3 code&#39;</span>,<span style=color:#ed9d13>&#39;suicides_no&#39;</span>,<span style=color:#ed9d13>&#39;population&#39;</span>,<span style=color:#ed9d13>&#39;year&#39;</span>]]

suicides_map[<span style=color:#ed9d13>&#34;suicides/100k pop&#34;</span>]=suicides_map[<span style=color:#ed9d13>&#34;suicides_no&#34;</span>]*<span style=color:#3677a9>1000</span>/suicides_map[<span style=color:#ed9d13>&#34;population&#34;</span>]

px.choropleth(suicides_map, locations=<span style=color:#ed9d13>&#34;Alpha-3 code&#34;</span>, color=<span style=color:#ed9d13>&#34;suicides/100k pop&#34;</span>, hover_name=<span style=color:#ed9d13>&#34;country&#34;</span>, animation_frame=<span style=color:#ed9d13>&#34;year&#34;</span>,
             color_continuous_scale=px.colors.sequential.Plasma)
</code></pre></div><p><img src=https://cdn-images-1.medium.com/max/2328/1*YOKJJFQGWnZ9QDb_TjRY-Q.gif alt="MLWhiz: Data Science, Machine Learning, Artificial Intelligence"></p><p>The plot above shows how suicide rates have changed over time in different countries and based on the info we get from the plot the coding effort required is minimal. We can see that:</p><ul><li><p>A lot of countries are missing</p></li><li><p>Africa has very few countries in data</p></li><li><p>Almost all of Asia is also missing.</p></li></ul><p>We can get quite a good understanding of our data just by seeing the above graphs.</p><p><em><strong>Animations on the time axis also add up a lot of value as we are able to see all our data using a single graph.</strong></em></p><p>This can help us in finding hidden patterns in the data. And you have to agree, it looks cool too.</p><h2 id=conclusion>Conclusion</h2><p>This was just a preview of Plotly Express. You can do a lot of other things using this library.</p><p>The main thing I liked about this library is the way it has tried to simplify graph creation. And how the graphs look cool out of the box.</p><p><em><strong>Just think of the lengths one would have to go to to create the same graphs in Seaborn or Matplotlib or even Plotly</strong></em>. And you will be able to appreciate the power the library provides even more.</p><p>There is a bit of lack of documentation for this project by Plotly, but I found that the functions are pretty much well documented. On that note, you can see function definitions using Shift+Tab in Jupyter.</p><p>Also as per its announcement article: “Plotly Express is <em>totally free</em>: with its permissive open-source MIT license, you can use it however you like (yes, even in commercial products!).”</p><p>So there is no excuse left now to put off that visual. Just get to it…</p><p>You can find all the code for this post and run it yourself in this
<a href=https://www.kaggle.com/mlwhiz/plotly-express/ target=_blank rel="nofollow noopener">Kaggle Kernel</a></p><p>If you want to learn about best strategies for creating Visualizations, I would like to call out an excellent course about
<a href=https://coursera.pxf.io/e45JOX target=_blank rel="nofollow noopener">&lt;strong>Data Visualization and applied plotting&lt;/strong></a>
from the University of Michigan which is a part of a pretty good
<a href=https://coursera.pxf.io/e45JOX target=_blank rel="nofollow noopener">&lt;strong>Data Science Specialization with Python&lt;/strong></a>
in itself. Do check it out</p><p>I am going to be writing more beginner friendly posts in the future too. Follow me up at
<a href=https://mlwhiz.medium.com/ target=_blank rel="nofollow noopener">&lt;strong>Medium&lt;/strong></a>
or Subscribe to my
<a href=https://mlwhiz.com/>&lt;strong>blog&lt;/strong></a>
to be informed about them. As always, I welcome feedback and constructive criticism and can be reached on Twitter
<a href=https://twitter.com/MLWhiz target=_blank rel="nofollow noopener">@mlwhiz</a></p><script async data-uid=8d7942551b src=https://mlwhiz.ck.page/8d7942551b/index.js></script><div class=shareaholic-canvas data-app=share_buttons data-app-id=28372088 style=margin-bottom:1px></div><a href=https://coursera.pxf.io/coursera rel=nofollow><img border=0 alt="Start your future with a Data Analysis Certificate." src="https://ad.linksynergy.com/fs-bin/show?id=lVarvwc5BD0&bids=759505.377&subid=0&type=4&gridnum=16"></a><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//mlwhiz.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class=col-lg-4><div class=widget><script type=text/javascript src=https://ko-fi.com/widgets/widget_2.js></script><script type=text/javascript>kofiwidget2.init('Support Me on Ko-fi','#00aaa1','S6S3NPCD'),kofiwidget2.draw()</script></div><div class=widget><h4 class=widget-title>About Me</h4><img src=https://mlwhiz.com/images/author.jpg alt class="img-fluid author-thumb-sm d-block mx-auto rounded-circle mb-4"><p>I’m a data scientist consultant and big data engineer based in London, where I am currently working with Facebook .</p><a href=https://mlwhiz.com/about/ class="btn btn-outline-primary">Know More</a></div><div class=widget><h4 class=widget-title>Topics</h4><ul class=list-unstyled><li><a class=categoryStyle style=color:#fff href=/categories/awesome-guides>Awesome Guides</a></li><li><a class=categoryStyle style=color:#fff href=/categories/big-data>Big Data</a></li><li><a class=categoryStyle style=color:#fff href=/categories/computer-vision>Computer Vision</a></li><li><a class=categoryStyle style=color:#fff href=/categories/data-science>Data Science</a></li><li><a class=categoryStyle style=color:#fff href=/categories/deep-learning>Deep Learning</a></li><li><a class=categoryStyle style=color:#fff href=/categories/learning-resources>Learning Resources</a></li><li><a class=categoryStyle style=color:#fff href=/categories/natural-language-processing>Natural Language Processing</a></li><li><a class=categoryStyle style=color:#fff href=/categories/opinion>Opinion</a></li><li><a class=categoryStyle style=color:#fff href=/categories/programming>Programming</a></li></ul></div><div class=widget><h4 class=widget-title>Tags</h4><ul class=list-inline><li class=list-inline-item><a class="tagStyle text-white" href=/tags/algorithms>Algorithms</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/artificial-intelligence>Artificial Intelligence</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/dask>Dask</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/deployment>Deployment</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/ec2>Ec2</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/generative-adversarial-networks>Generative Adversarial Networks</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/graphs>Graphs</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/image-classification>Image Classification</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/instance-segmentation>Instance Segmentation</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/interpretability>Interpretability</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/jobs>Jobs</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/kaggle>Kaggle</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/language-modeling>Language Modeling</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/machine-learning>Machine Learning</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/math>Math</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/multiprocessing>Multiprocessing</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/object-detection>Object Detection</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/oop>Oop</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/opinion>Opinion</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/pandas>Pandas</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/production>Production</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/productivity>Productivity</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/python>Python</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/pytorch>Pytorch</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/spark>Spark</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/sql>SQL</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/statistics>Statistics</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/streamlit>Streamlit</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/text-classification>Text Classification</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/timeseries>Timeseries</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/tools>Tools</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/transformers>Transformers</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/translation>Translation</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/visualization>Visualization</a></li><li class=list-inline-item><a class="tagStyle text-white" href=/tags/xgboost>Xgboost</a></li></ul></div><div class=widget><h4 class=widget-title>Connect With Me</h4><ul class="list-inline social-links"><li class=list-inline-item><a href=https://www.linkedin.com/in/rahulagwl/><i class=ti-linkedin></i></a></li><li class=list-inline-item><a href=https://mlwhiz.medium.com/><i class=ti-book></i></a></li><li class=list-inline-item><a href=https://twitter.com/MLWhiz><i class=ti-twitter-alt></i></a></li><li class=list-inline-item><a href=https://www.facebook.com/mlwhizblog><i class=ti-facebook></i></a></li><li class=list-inline-item><a href=https://github.com/MLWhiz><i class=ti-github></i></a></li></ul></div><script async data-uid=bfe9f82f10 src=https://mlwhiz.ck.page/bfe9f82f10/index.js></script><script async data-uid=3452d924e2 src=https://mlwhiz.ck.page/3452d924e2/index.js></script></div></div></div></section><footer><div class=container><div class=row><div class="col-12 text-center mb-5"><a href=https://mlwhiz.com/><img src=https://mlwhiz.com/images/logo.png class=img-fluid-custom-bottom alt="Helping You Learn Data Science!"></a></div><div class="col-lg-3 col-sm-6 mb-5"><h6 class=mb-4>Contact Me</h6><ul class=list-unstyled><li class=mb-3><i class="ti-location-pin mr-3 text-primary"></i>India, Bangalore</li><li class=mb-3><a class=text-dark href=mailto:rahul@mlwhiz.com><i class="ti-email mr-3 text-primary"></i>rahul@mlwhiz.com</a></li></ul></div><div class="col-lg-3 col-sm-6 mb-5"><h6 class=mb-4>Social Contacts</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://www.linkedin.com/in/rahulagwl/>Linkedin</a></li><li class=mb-3><a class=text-dark href=https://mlwhiz.medium.com/>Medium</a></li><li class=mb-3><a class=text-dark href=https://twitter.com/MLWhiz>Twitter</a></li><li class=mb-3><a class=text-dark href=https://www.facebook.com/mlwhizblog>Facebook</a></li><li class=mb-3><a class=text-dark href=https://github.com/MLWhiz>Github</a></li></ul></div><div class="col-lg-3 col-sm-6 mb-5"><h6 class=mb-4>Categories</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=/categories/awesome-guides>Awesome Guides</a></li><li class=mb-3><a class=text-dark href=/categories/big-data>Big Data</a></li><li class=mb-3><a class=text-dark href=/categories/computer-vision>Computer Vision</a></li><li class=mb-3><a class=text-dark href=/categories/data-science>Data Science</a></li><li class=mb-3><a class=text-dark href=/categories/deep-learning>Deep Learning</a></li><li class=mb-3><a class=text-dark href=/categories/learning-resources>Learning Resources</a></li><li class=mb-3><a class=text-dark href=/categories/natural-language-processing>Natural Language Processing</a></li><li class=mb-3><a class=text-dark href=/categories/opinion>Opinion</a></li><li class=mb-3><a class=text-dark href=/categories/programming>Programming</a></li></ul></div><div class="col-lg-3 col-sm-6 mb-5"><h6 class=mb-4>Quick Links</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://mlwhiz.com/about>About</a></li><li class=mb-3><a class=text-dark href=https://mlwhiz.com/blog>Post</a></li></ul></div><div class="col-12 border-top py-4 text-center">Copyright © 2020 <a href=https://mlwhiz.com>MLWhiz</a> All Rights Reserved</div></div></div></footer><script>var indexURL="https://mlwhiz.com/index.json"</script><script src=https://mlwhiz.com/plugins/compressjscss/main.js></script><script src=https://mlwhiz.com/js/script.min.js></script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-54777926-1','auto'),ga('send','pageview')</script></body></html>